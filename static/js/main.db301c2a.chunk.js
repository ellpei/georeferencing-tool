/*! For license information please see main.db301c2a.chunk.js.LICENSE.txt */
(this["webpackJsonpgeoreferencing-tool"]=this["webpackJsonpgeoreferencing-tool"]||[]).push([[0],{16:function(e,t,n){var a=n(79),r=n(52),p={triangulate:a.triangulate,inCircle:a.inCircle,Point:r.Point,Triangle:r.Triangle,Edge:r.Edge};e.exports=p},43:function(e,t,n){},44:function(e,t){function n(e){var t=e.x,n=e.y,a=e.lat,r=e.lng,p=e.note,l=e.parentType,o=e.parent;this.x=t||0,this.y=n||0,this.lat=a||0,this.lng=r||0,this.note=p||"",this.parentType=l||"",this.parent=o||[],this.toJSON=function(){return{x:this.x,y:this.y,lat:this.lat,lng:this.lng,parentType:this.parentType,parent:this.parent,note:this.note}}}n.prototype.constructor=n,e.exports=n,n.prototype.distance=function(e){return Math.sqrt((e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y))},n.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.cross=function(e){return this.y*e.x-this.x*e.y},n.prototype.copy=function(e){this.set(e)},n.prototype.set=function(e){var t=e.x,n=e.y,a=e.lat,r=e.lng,p=e.note,l=e.parentType,o=e.parent;this.x=t||this.x,this.y=n||this.y,this.lat=a||this.lat,this.lng=r||this.lng,this.note=p||this.note,this.parentType=l||this.parentType,this.parent=o||this.parent}},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){e.exports={Point:n(44),Triangle:n(81),Edge:n(82)}},53:function(e,t){e.exports=function(e,t,n,a){var r,p,l,o,i,s,c,y,d=Number.MIN_VALUE;if(Math.abs(t.y-n.y)<d&&Math.abs(n.y-a.y)<d)return!1;Math.abs(n.y-t.y)<d?(p=-(a.x-n.x)/(a.y-n.y),o=.5*(n.x+a.x),s=.5*(n.y+a.y),y=p*((c=.5*(n.x+t.x))-o)+s):Math.abs(a.y-n.y)<d?(r=-(n.x-t.x)/(n.y-t.y),l=.5*(t.x+n.x),i=.5*(t.y+n.y),y=r*((c=.5*(a.x+n.x))-l)+i):(r=-(n.x-t.x)/(n.y-t.y),p=-(a.x-n.x)/(a.y-n.y),l=.5*(t.x+n.x),o=.5*(n.x+a.x),i=.5*(t.y+n.y),y=r*((c=(r*l-p*o+(s=.5*(n.y+a.y))-i)/(r-p))-l)+i);var h=n.x-c,g=n.y-y,u=h*h+g*g;return(h=e.x-c)*h+(g=e.y-y)*g<=u}},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){e.exports={triangulate:n(80),inCircle:n(53)}},80:function(e,t,n){var a=n(52),r=n(53);e.exports=function(e){var t,n,p=e.length;if(p<3)return[];var l=4*p,o=e[0].x,i=e[0].y,s=o,c=i;for(t=1;t<p;t++)e[t].id=t,e[t].x<o&&(o=e[t].x),e[t].x>s&&(s=e[t].x),e[t].y<i&&(i=e[t].y),e[t].y>c&&(c=e[t].y);var y=s-o,d=c-i,h=y>d?y:d,g=.5*(s+o),u=.5*(c+i);e.push(new a.Point({x:g-2*h,y:u-h,id:p+1})),e.push(new a.Point({x:g,y:u+2*h,id:p+2})),e.push(new a.Point({x:g+2*h,y:u-h,id:p+3}));var x=[];for(e[p].id=p,e[p+1].id=p+1,e[p+2].id=p+2,x.push(new a.Triangle(e[p],e[p+1],e[p+2])),t=0;t<p;t++){var T=[];for(n=0;n<x.length;n++)r(e[t],x[n].p1,x[n].p2,x[n].p3)&&(T.push(new a.Edge(x[n].p1,x[n].p2)),T.push(new a.Edge(x[n].p2,x[n].p3)),T.push(new a.Edge(x[n].p3,x[n].p1)),x.splice(n,1),n--);if(!(t>=p)){for(n=T.length-2;n>=0;n--)for(var j=T.length-1;j>=n+1;j--)T[n].equals(T[j])&&(T.splice(j,1),T.splice(n,1),j--);for(n=0;n<T.length;n++)x.length>=l&&console.error("Exceeded maximum edges"),x.push(new a.Triangle(T[n].p1,T[n].p2,e[t]));T=[]}}for(t=x.length-1;t>=0;t--)(x[t].p1.id>=p||x[t].p2.id>=p||x[t].p3.id>=p)&&x.splice(t,1);return e.splice(e.length-1,1),e.splice(e.length-1,1),e.splice(e.length-1,1),x.concat()}},81:function(e,t,n){var a=n(44),r=n(83);function p(e,t,n){this.p1=e||new a({}),this.p2=t||new a({}),this.p3=n||new a({}),this.mid0=new a({x:this.p1.x+(this.p2.x-this.p1.x)/2,y:this.p1.y+(this.p2.y-this.p1.y)/2}),this.mid1=new a({x:this.p2.x+(this.p3.x-this.p2.x)/2,y:this.p2.y+(this.p3.y-this.p2.y)/2}),this.mid2=new a({x:this.p3.x+(this.p1.x-this.p3.x)/2,y:this.p3.y+(this.p1.y-this.p3.y)/2}),this.matrixGeoToMap=r.fromTriangles(this.getGeoCoords(),this.getPisteMapCoords()),this.matrixMapToGeo=r.fromTriangles(this.getPisteMapCoords(),this.getGeoCoords()),this.toJSON=function(){return[this.p1,this.p2,this.p3]}}function l(e,t,n,a,r,p){return Math.abs((e*(a-p)+n*(p-t)+r*(t-a))/2)}p.prototype.constructor=p,e.exports=p,p.prototype.getCenter=function(){return new a({x:(this.p1.x+this.p2.x+this.p3.x)/3,y:(this.p1.y+this.p2.y+this.p3.y)/3})},p.prototype.getGeoCenter=function(){return[(this.p1.lat+this.p2.lat+this.p3.lat)/3,(this.p1.lng+this.p2.lng+this.p3.lng)/3]},p.prototype.geoDistanceToPoint=function(e){var t=this.getGeoCenter(),n=[e.lat,e.lng];return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))},p.prototype.mapDistanceToPoint=function(e){var t=this.getCenter();return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.x-t.y))},p.prototype.getPisteMapCoords=function(){return[{x:this.p1.x,y:this.p1.y},{x:this.p2.x,y:this.p2.y},{x:this.p3.x,y:this.p3.y}]},p.prototype.getGeoCoords=function(){return[{x:this.p1.lat,y:this.p1.lng},{x:this.p2.lat,y:this.p2.lng},{x:this.p3.lat,y:this.p3.lng}]},p.prototype.transformGeoCoords=function(e){return r.applyToPoint(this.matrixGeoToMap,{x:e.lat,y:e.lng})},p.prototype.transformMapCoords=function(e){return r.applyToPoint(this.matrixMapToGeo,{x:e.x,y:e.y})},p.prototype.enclosesGeoCoords=function(e){var t=function(e,t){return e[1]*t[0]-e[0]*t[1]},n=function(e,t){return[e[0]-t[0],e[1]-t[1]]},a=[e.lat,e.lng],r=[this.p1.lat,this.p1.lng],p=[this.p2.lat,this.p2.lng],l=[this.p3.lat,this.p3.lng],o=t(n(a,r),n(p,a)),i=t(n(a,p),n(l,p));if(Math.sign(o)!==Math.sign(i))return!1;var s=t(n(a,l),n(r,l));return Math.sign(o)===Math.sign(s)},p.prototype.enclosesMapCoords=function(e){var t=e.x,n=e.y,a=this.p1.x,r=this.p1.y,p=this.p2.x,o=this.p2.y,i=this.p3.x,s=this.p3.y;return l(a,r,p,o,i,s)===l(t,n,p,o,i,s)+l(a,r,t,n,i,s)+l(a,r,p,o,t,n)}},82:function(e,t,n){var a=n(44);function r(e,t){this.p1=e||new a({}),this.p2=t||new a({})}r.prototype.constructor=r,e.exports=r,r.prototype.equals=function(e){return this.p1===e.p2&&this.p2===e.p1||this.p1===e.p1&&this.p2===e.p2},r.prototype.length=function(){return this.p1.distance(this.p2)}},84:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),p=n.n(r),l=n(23),o=n.n(l),i=(n(63),n(6)),s=n(7),c=n(9),y=n(8),d=(n(64),n(65),n(66),n(31)),h=n(89),g=n(32),u=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleDropdownChange=function(e){a.setState({val:e.target.value})},a.handleStart=function(){var e=a.state,t=e.uploadedMap,n=e.val,r=e.useGeoCoords;null==t?a.props.onSelect(n,r):a.props.onUpload(t,r)},a.handleFileChange=function(e){null!=e.target.files[0]&&a.setState({uploadedMap:URL.createObjectURL(e.target.files[0])})},a.state={val:a.props.resorts[0].id,uploadedMap:null,useGeoCoords:!0},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=function(){return e.setState({useGeoCoords:!e.state.useGeoCoords})};return Object(a.jsx)("div",{id:"mapform",children:Object(a.jsx)("div",{className:"vertical-center",children:Object(a.jsx)(d.a,{className:"selectcontainer",children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(h.a.Label,{className:"form-title",children:"Welcome!"}),Object(a.jsxs)(h.a.Group,{controlId:"mode",children:[Object(a.jsx)(h.a.Label,{children:"Select coordinate collection mode"}),Object(a.jsx)("br",{}),Object(a.jsx)(h.a.Check,{custom:!0,inline:!0,type:"radio",id:0,label:"Geographic and map coordinates",checked:this.state.useGeoCoords,onChange:t}),Object(a.jsx)(h.a.Check,{custom:!0,inline:!0,type:"radio",id:1,label:"Only map coordinates",checked:!this.state.useGeoCoords,onChange:t})]}),Object(a.jsxs)(h.a.Group,{controlId:"exampleForm.ControlSelect1",children:[Object(a.jsx)(h.a.Label,{children:"Select or upload ski map"}),Object(a.jsx)(h.a.Control,{as:"select",onChange:this.handleDropdownChange,children:this.props.resorts.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.title},e.title)}))}),Object(a.jsx)("br",{}),Object(a.jsx)(h.a.File,{onChange:this.handleFileChange,multiple:!1,accept:"image/png, image/jpeg"}),Object(a.jsx)("br",{}),this.state.uploadedMap?Object(a.jsxs)("div",{className:"image-wrapper",children:[Object(a.jsx)("img",{src:this.state.uploadedMap,alt:"preview"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}):null]}),Object(a.jsx)(g.b,{to:"/matcher",onClick:this.handleStart,className:"btn btn-primary",children:"Start!"})]})})})})}}]),n}(p.a.Component),x=n(12),T=n(17),j=(n(50),n(43),[{x:267,y:533,parent:["\xc514"],parentType:"Lift",lat:63.4299305329716,lng:13.034080668125355,note:"middle"},{x:168,y:578,parent:["\xc514"],parentType:"Lift",lat:63.430198785426704,lng:13.024714539841886,note:"bottom-middle"},{x:443,y:506,parent:["\xc514"],parentType:"Lift",lat:63.42973620134537,lng:13.038126786143627,note:"top"},{x:220,y:553,parent:["\xc514"],parentType:"Lift",lat:63.430081694025084,lng:13.029233291599022,note:"middle"},{x:332,y:525,parent:["\xc514"],parentType:"Lift",lat:63.429786844876894,lng:13.035201055136682,note:"middle"},{x:322,y:789,parent:["\xc517"],parentType:"Lift",lat:63.41564681927512,lng:13.037588938413673,note:"bottom"},{x:322,y:889,parent:["\xc516"],parentType:"Lift",lat:63.413428408908615,lng:13.036760678575119,note:"bottom"},{x:313,y:828,parent:["\xc516"],parentType:"Lift",lat:63.413428408908615,lng:13.036760678575119,note:"top"},{x:382,y:691,parent:["\xc519"],parentType:"Lift",lat:63.420256679853786,lng:13.04075487446791,note:"middle"},{x:411,y:626,parent:["\xc519"],parentType:"Lift",lat:63.4230691346045,lng:13.04198966545333,note:"middle-top"},{x:370,y:754,parent:["\xc519"],parentType:"Lift",lat:63.41633780599507,lng:13.039121724013079,note:"middle-bottom"},{x:1049,y:329,parent:["H27"],parentType:"Lift",lat:63.429347310924044,lng:13.068331671013214,note:"bottom"},{x:1067,y:524,parent:["H23"],parentType:"Lift",lat:63.419750645339505,lng:13.067750841475627,note:"middle"},{x:1131,y:416,parent:["H23"],parentType:"Lift",lat:63.42330305619766,lng:13.07236033239243,note:"middle"},{x:1062,y:663,parent:["\xc522"],parentType:"Lift",lat:63.415953719656244,lng:13.063774053012454,note:"top"},{x:1086,y:915,parent:["\xc522"],parentType:"Lift",lat:63.409751213055465,lng:13.061414652963638,note:"middle"},{x:1546,y:1173,parent:["\xc529"],parentType:"Lift",lat:63.40265903348546,lng:13.07635681177306,note:"bottom"},{x:1265,y:288,parent:["\xc529"],parentType:"Lift",lat:63.42730461328684,lng:13.07931089490709,note:"top"},{x:1326,y:507,parent:["\xc529"],parentType:"Lift",lat:63.42085720586304,lng:13.078540399463403,note:"middle-top"},{x:1484,y:979,parent:["\xc529"],parentType:"Lift",lat:63.40714640094834,lng:13.076896129937706,note:"middle-bottom"},{x:1293,y:402,parent:["\xc529"],parentType:"Lift",lat:63.423555184990285,lng:13.078864772230249,note:"middle-middle-top"},{x:1375,y:630,parent:["\xc529"],parentType:"Lift",lat:63.41732647518361,lng:13.078115762749691,note:"top-middle-middle"},{x:1585,y:1176,parent:["\xc530"],parentType:"Lift",lat:63.402607701497416,lng:13.076754473963556,note:"bottom"},{x:1531,y:988,parent:["\xc530"],parentType:"Lift",lat:63.4060854215301,lng:13.078099089953467,note:"middle"},{x:1650,y:962,parent:["\xc531"],parentType:"Lift",lat:63.40648585280049,lng:13.083268945564116,note:"middle"},{x:1698,y:807,parent:["\xc531"],parentType:"Lift",lat:63.40859748904817,lng:13.086493143177611,note:"middle-top"},{x:1719,y:759,parent:["\xc532","\xc531"],parentType:"Lift",lat:63.40971637742563,lng:13.088201110682357,note:"intersect"},{x:1652,y:727,parent:["\xc532"],parentType:"Lift",lat:63.41044216928537,lng:13.08581672040134,note:"middle-top"},{x:1698,y:1245,parent:["\xc533"],parentType:"Lift",lat:63.40068953541448,lng:13.07912649501833,note:"bottom"},{x:1870,y:939,parent:["\xc533"],parentType:"Lift",lat:63.4050192108493,lng:13.09042037301466,note:"top"},{x:1790,y:1089,parent:["\xc533"],parentType:"Lift",lat:63.402917281090275,lng:13.085694716904674,note:"middle"},{x:1835,y:1005,parent:["\xc533"],parentType:"Lift",lat:63.403898305371634,lng:13.08835591637686,note:"middle-top"},{x:1929,y:916,parent:["\xc534"],parentType:"Lift",lat:63.40508225079141,lng:13.093172279024529,note:"bottom"},{x:2093,y:801,parent:["\xc534"],parentType:"Lift",lat:63.40682699243534,lng:13.10271192521908,note:"middle"},{x:2003,y:862,parent:["\xc534"],parentType:"Lift",lat:63.40596648522639,lng:13.098001637856447,note:"bottom-middle"},{x:543,y:494,parent:["31"],parentType:"Piste",lat:63.430466828605596,lng:13.039371306931011,note:"top"},{x:207,y:510,parent:["31"],parentType:"Piste",lat:63.434475278757695,lng:13.024966157897357,note:"big curve"},{x:357,y:486,parent:["31"],parentType:"Piste",lat:63.43252977497988,lng:13.032487900285057,note:"middle-top"},{x:287,y:496,parent:["31"],parentType:"Piste",lat:63.43378051103263,lng:13.02827091300045,note:"middle"},{x:127,y:555,parent:["31"],parentType:"Piste",lat:63.43308109962393,lng:13.01957055229157,note:"bottom-middle"},{x:67,y:577,parent:["31"],parentType:"Piste",lat:63.43186983558781,lng:13.016282108408172,note:"bottom curve"},{x:506,y:484,parent:["31"],parentType:"Piste",lat:63.43069839543489,lng:13.039098119401613,note:"top curve"},{x:284,y:517,parent:["32"],parentType:"Piste",lat:63.43043141140882,lng:13.026138903311816,note:"middle"},{x:412,y:499,parent:["32"],parentType:"Piste",lat:63.430118621734536,lng:13.032453535304874,note:"middle-top"},{x:172,y:553,parent:["32"],parentType:"Piste",lat:63.43061781758484,lng:13.023128655265026,note:"bottom-middle"},{x:247,y:573,parent:["33","36"],parentType:"Piste",lat:63.42975291643728,lng:13.026192850773834,note:"intersect"},{x:123,y:614,parent:["33"],parentType:"Piste",lat:63.429550251241274,lng:13.018585134998325,note:"bottom-middle"},{x:952,y:1156,parent:["34","55"],parentType:"Piste",lat:63.40689621333025,lng:13.056432251914462,note:"bottom, intersect"},{x:211,y:629,parent:["34"],parentType:"Piste",lat:63.42502588771983,lng:13.02841444573167,note:"top curve"},{x:186,y:745,parent:["34"],parentType:"Piste",lat:63.42084909766682,lng:13.028540967429429,note:"second curve"},{x:280,y:799,parent:["34","40"],parentType:"Piste",lat:63.41682142525314,lng:13.032467462519456,note:"intersect"},{x:195,y:678,parent:["34"],parentType:"Piste",lat:63.42395834506874,lng:13.028507631324713,note:"restaurant"},{x:667,y:958,parent:["34"],parentType:"Piste",lat:63.4098678543813,lng:13.048517462589286,note:"near-\xc521"},{x:623,y:987,parent:["34"],parentType:"Piste",lat:63.40942312076809,lng:13.049600363744114,note:"left curve"},{x:742,y:1018,parent:["34"],parentType:"Piste",lat:63.40924633044024,lng:13.052724520456644,note:"right curve "},{x:645,y:1038,parent:["34"],parentType:"Piste",lat:63.40794242889727,lng:13.052909127754093,note:"left curve2"},{x:824,y:1092,parent:["34"],parentType:"Piste",lat:63.40794122222663,lng:13.054232277260333,note:"right curve2"},{x:883,y:1132,parent:["34"],parentType:"Piste",lat:63.40733820530902,lng:13.054597208382175,note:"slight left curve"},{x:515,y:883,parent:["34"],parentType:"Piste",lat:63.41247740123199,lng:13.042568726005639,note:"straight"},{x:265,y:603,parent:["34"],parentType:"Piste",lat:63.425868793236084,lng:13.02922449931548,note:"near skidland"},{x:978,y:364,parent:["35","H25"],parentType:"Piste",lat:63.42859973036792,lng:13.071787331461445,note:"intersect"},{x:1e3,y:412,parent:["35","49"],parentType:"Piste",lat:63.42842375645897,lng:13.068022727986811,note:"intersect"},{x:887,y:421,parent:["35"],parentType:"Piste",lat:63.43239292934682,lng:13.05221293873218,note:"intersect-self"},{x:821,y:486,parent:["35"],parentType:"Piste",lat:63.43036080162646,lng:13.042970758358408,note:"curve"},{x:782,y:475,parent:["35","H24"],parentType:"Piste",lat:63.4305128834293,lng:13.037182919814692,note:"intersect"},{x:644,y:519,parent:["35"],parentType:"Piste",lat:63.430392386126606,lng:13.04333157618934},{x:1024,y:323,parent:["35"],parentType:"Piste",lat:63.42912726687091,lng:13.071074360266563,note:"curve"},{x:1141,y:344,parent:["49"],parentType:"Piste",lat:63.426842541888405,lng:13.072089156669193,note:"top"},{x:1073,y:365,parent:["49"],parentType:"Piste",lat:63.42849749157539,lng:13.06699818471563,note:"curve"},{x:934,y:437,parent:["49"],parentType:"Piste",lat:63.426293819471105,lng:13.064514707513503,note:"left curve"},{x:980,y:464,parent:["49"],parentType:"Piste",lat:63.423202392942486,lng:13.065563559237496,note:"right curve"},{x:893,y:519,parent:["49"],parentType:"Piste",lat:63.42297967512799,lng:13.060762448075822,note:"parallel curve"},{x:949,y:578,parent:["49"],parentType:"Piste",lat:63.42078295617757,lng:13.061778821367911,note:"dirverge curve"},{x:1053,y:401,parent:["49"],parentType:"Piste",lat:63.4272010861454,lng:13.070139545199448,note:"right curve"},{x:930,y:622,parent:["49"],parentType:"Piste",lat:63.420748822688864,lng:13.057131685456946,note:"bottom curve"},{x:958,y:656,parent:["47","49"],parentType:"Piste",lat:63.41899753000909,lng:13.05629099777064,note:"intersect"},{x:716,y:604,parent:["47"],parentType:"Piste",lat:63.4222679955208,lng:13.049851543694832,note:"middle-top"},{x:1556,y:799,parent:["47"],parentType:"Piste",lat:63.40824586458054,lng:13.080963558138755,note:"curve"},{x:1785,y:858,parent:["47","74"],parentType:"Piste",lat:63.40822631779612,lng:13.088334452088914,note:"first-intersect"},{x:479,y:737,parent:["46"],parentType:"Piste",lat:63.416203369027954,lng:13.041057953541747,note:"middle"},{x:833,y:695,parent:["48"],parentType:"Piste",lat:63.416203639263095,lng:13.054869672569666,note:"top-straight"},{x:787,y:791,parent:["48"],parentType:"Piste",lat:63.41466240602008,lng:13.052708482655916,note:"middle straight"},{x:923,y:853,parent:["48","50"],parentType:"Piste",lat:63.4123776195984,lng:13.057453564945169,note:"intersect"},{x:1013,y:887,parent:["48","56"],parentType:"Piste",lat:63.41096842803115,lng:13.060045249677712,note:"intersect"},{x:1099,y:921,parent:["48","57"],parentType:"Piste",lat:63.41008464105018,lng:13.061854252765519,note:"intersect"},{x:1339,y:1012,parent:["48"],parentType:"Piste",lat:63.40656740103598,lng:13.069848447279039,note:"bottom straight"},{x:1505,y:1049,parent:["48","\xc529"],parentType:"Piste",lat:63.40460613394916,lng:13.076590364387028,note:"intersect"},{x:1552,y:1059,parent:["48","\xc530"],parentType:"Piste",lat:63.40437746795797,lng:13.077436679365686,note:"intersect"},{x:1657,y:1095,parent:["48","71"],parentType:"Piste",lat:63.40396996870288,lng:13.079203376867659,note:"intersect"},{x:1647,y:1127,parent:["48"],parentType:"Piste",lat:63.40269645147208,lng:13.078509033923757,note:"mid bottom"},{x:1630,y:1066,parent:["\xc531"],parentType:"Lift",lat:63.40418773288426,lng:13.079836309996965,note:"bottom-middle"},{x:385,y:562,parent:["41"],parentType:"Piste",lat:63.42534251753149,lng:13.038991330210123,note:"top"},{x:351,y:611,parent:["41","42"],parentType:"Piste",lat:63.42339556561729,lng:13.040674693041531,note:"intersect"},{x:397,y:588,parent:["42"],parentType:"Piste",lat:63.42429748080892,lng:13.041749918310792,note:"top-middle"},{x:359,y:672,parent:["42"],parentType:"Piste",lat:63.42028346820686,lng:13.037461822076416,note:"curve"},{x:348,y:749,parent:["42"],parentType:"Piste",lat:63.41818036249037,lng:13.038166846008611,note:"mid-bottom"},{x:474,y:601,parent:["44"],parentType:"Piste",lat:63.422649680955196,lng:13.044624311680115,note:"top right curve"},{x:431,y:626,parent:["44"],parentType:"Piste",lat:63.421660987383326,lng:13.043245649061607,note:"top left curve"},{x:407,y:695,parent:["44"],parentType:"Piste",lat:63.41952557064759,lng:13.04158754123065,note:"middle"},{x:389,y:756,parent:["44"],parentType:"Piste",lat:63.41629890812881,lng:13.040045848895415,note:"bottom-middle"},{x:309,y:590,parent:["40"],parentType:"Piste",lat:63.42523170650488,lng:13.035719674314125,note:"top right curve "},{x:270,y:621,parent:["40"],parentType:"Piste",lat:63.42403428993679,lng:13.033990067248995,note:"top left curve"},{x:235,y:689,parent:["40"],parentType:"Piste",lat:63.422229885706955,lng:13.032784133944219,note:"mid left curve"},{x:236,y:748,parent:["40"],parentType:"Piste",lat:63.4195807783606,lng:13.032282395413297,note:"bottom left curve"},{x:265,y:793,parent:["40","34"],parentType:"Piste",lat:63.416813930210886,lng:13.03249212605435,note:"intersect"},{x:580,y:582,parent:["47"],parentType:"Piste",lat:63.42373032861879,lng:13.048674747507055,note:"middle-top"},{x:839,y:630,parent:["47"],parentType:"Piste",lat:63.42030947702555,lng:13.052716698047963,note:"middle"},{x:1388,y:761,parent:["47","71"],parentType:"Piste",lat:63.409920667458394,lng:13.076861234065795,note:"intersect"},{x:954,y:980,parent:["55"],parentType:"Piste",lat:63.40955416407153,lng:13.056732378640454,note:"right curve"},{x:905,y:798,parent:["55"],parentType:"Piste",lat:63.41332362832586,lng:13.05734372592533,note:"left curve"},{x:912,y:1069,parent:["55"],parentType:"Piste",lat:63.40824974927543,lng:13.056036934295102,note:"second left curve"},{x:973,y:746,parent:["55"],parentType:"Piste",lat:63.414342838654456,lng:13.059705283417289,note:"top straight"},{x:931,y:926,parent:["55"],parentType:"Piste",lat:63.41086192789221,lng:13.056549646102393,note:"middle straight"},{x:934,y:1033,parent:["55"],parentType:"Piste",lat:63.40923510978474,lng:13.056721542001268,note:"middle straigh"},{x:975,y:1160,parent:["34","55"],parentType:"Piste",lat:63.406896099258056,lng:13.056434017680036,note:"intersect"},{x:1071,y:712,parent:["56","57"],parentType:"Piste",lat:63.41521272753232,lng:13.065239433316393,note:"intersect"},{x:1028,y:746,parent:["56"],parentType:"Piste",lat:63.41428932083163,lng:13.064660697369067,note:"upper"},{x:1001,y:800,parent:["56"],parentType:"Piste",lat:63.41388587124605,lng:13.0615080185748,note:"left curve"},{x:1035,y:828,parent:["56"],parentType:"Piste",lat:63.41233961456312,lng:13.061432528968355,note:"right curve"},{x:1012,y:924,parent:["56"],parentType:"Piste",lat:63.41001979395466,lng:13.05970920099431},{x:1045,y:971,parent:["56"],parentType:"Piste",lat:63.40920512648284,lng:13.06022155535285,note:"middle right curve"},{x:1012,y:1031,parent:["56"],parentType:"Piste",lat:63.40780650036995,lng:13.058409889567741,note:"lower left curve "},{x:1018,y:1119,parent:["56"],parentType:"Piste",lat:63.406230590464155,lng:13.057803511960055,note:"mid lower straight "},{x:1348,y:315,parent:["81"],parentType:"Piste",lat:63.42646515937982,lng:13.085849362352882,note:"top right curve "},{x:1390,y:390,parent:["81"],parentType:"Piste",lat:63.423711246063675,lng:13.086190413778661,note:"middle curve "},{x:1404,y:457,parent:["81"],parentType:"Piste",lat:63.42233046258272,lng:13.087142817104866,note:"bottom right curve "},{x:1298,y:308,parent:["80"],parentType:"Piste",lat:63.426408314959126,lng:13.079562663073764,note:"top"},{x:1306,y:394,parent:["80"],parentType:"Piste",lat:63.425041112549124,lng:13.079476438887333,note:"left curve"},{x:1330,y:456,parent:["80"],parentType:"Piste",lat:63.42166717638789,lng:13.08018843650228,note:"bottom-middle"},{x:1306,y:353,parent:["80"],parentType:"Piste",lat:63.42548267109828,lng:13.07946881387783},{x:879,y:365,parent:["83"],parentType:"Piste",lat:63.43298465327285,lng:13.070788584525012,note:"middle"},{x:960,y:352,parent:["83"],parentType:"Piste",lat:63.431489682463535,lng:13.071081699840432,note:"middle-top"},{x:807,y:395,parent:["83"],parentType:"Piste",lat:63.4344907211342,lng:13.068386749362814,note:"bottom-middle"},{x:741,y:446,parent:["84"],parentType:"Piste",lat:63.43420799913926,lng:13.059314321056164,note:"middle"},{x:578,y:482,parent:["85"],parentType:"Piste",lat:63.43545074442455,lng:13.043942739258494,note:"bottom"},{x:635,y:436,parent:["85"],parentType:"Piste",lat:63.43247126335575,lng:13.042215874563853,note:"middle"},{x:698,y:483,parent:["86"],parentType:"Piste",lat:63.43384019032374,lng:13.047795918245253,note:"middle"},{x:685,y:461,parent:["87"],parentType:"Piste",lat:63.4341446896486,lng:13.049318831462985,note:"middle"},{x:349,y:777,parent:["43"],parentType:"Piste",lat:63.4162411157001,lng:13.038583300853581,note:"bottom"},{x:378,y:660,parent:["43"],parentType:"Piste",lat:63.419655939919686,lng:13.039850830407058,note:"curve"},{x:365,y:712,parent:["43"],parentType:"Piste",lat:63.4184027757903,lng:13.039426281028565,note:"middle"},{x:1072,y:437,parent:["60"],parentType:"Piste",lat:63.423447853463955,lng:13.068766923630001,note:"y cross"},{x:935,y:498,parent:["59","60"],parentType:"Piste",lat:63.42286609506007,lng:13.066920060968718,note:"intersect"},{x:1008,y:474,parent:["60"],parentType:"Piste",lat:63.42281532200176,lng:13.066583921542184},{x:905,y:518,parent:["60"],parentType:"Piste",lat:63.42288942246926,lng:13.061294347760239,note:"left curve"},{x:970,y:573,parent:["60"],parentType:"Piste",lat:63.41943388794204,lng:13.062151859253172,note:"right curve "},{x:1038,y:669,parent:["60"],parentType:"Piste",lat:63.41685012112505,lng:13.06200994232872,note:"bottom"},{x:1220,y:323,parent:["59"],parentType:"Piste",lat:63.42622176084493,lng:13.075037049274053,note:"right curve "},{x:1137,y:370,parent:["59"],parentType:"Piste",lat:63.42506933428949,lng:13.073033465162153,note:"left curve "},{x:1088,y:465,parent:["59"],parentType:"Piste",lat:63.42261397632487,lng:13.070594173062803,note:"split"},{x:1046,y:497,parent:["59","60"],parentType:"Piste",lat:63.42063556622241,lng:13.067160426827815,note:"intersect"},{x:1021,y:540,parent:["59"],parentType:"Piste",lat:63.41997864401407,lng:13.06525404131864,note:"left curve"},{x:1351,y:531,parent:["82"],parentType:"Piste",lat:63.4184609926739,lng:13.079489217225321,note:"left curve "},{x:1386,y:589,parent:["82B"],parentType:"Piste",lat:63.413584452520745,lng:13.080704991202614,note:"right curve "},{x:1354,y:658,parent:["82","82A","82B"],parentType:"Piste",lat:63.413584452520745,lng:13.080704991202614,note:"bottom, intersect"},{x:1285,y:638,parent:["82A"],parentType:"Piste",lat:63.4141202350019,lng:13.075774329790772,note:"left curve"},{x:1332,y:593,parent:["82A"],parentType:"Piste",lat:63.414823114833915,lng:13.078985919572647,note:"right curve "},{x:1330,y:628,parent:["82B"],parentType:"Piste",lat:63.41328274188654,lng:13.078451340056473,note:"left curve"},{x:1467,y:661,parent:["82"],parentType:"Piste",lat:63.41200782618785,lng:13.07890813365406,note:"mid bottom"},{x:1391,y:771,parent:["71A"],parentType:"Piste",lat:63.40991964816899,lng:13.076857813208838,note:"top"},{x:1468,y:848,parent:["71","71A","71B"],parentType:"Piste",lat:63.40899252991655,lng:13.079060867080088,note:"intersect"},{x:1413,y:822,parent:["71A"],parentType:"Piste",lat:63.40871849197639,lng:13.076777241069676,note:"left curve "},{x:1466,y:810,parent:["71B"],parentType:"Piste",lat:63.4086521403701,lng:13.078095150420607,note:"left curve "},{x:1658,y:1089,parent:["71"],parentType:"Piste",lat:63.403968255535396,lng:13.079204077429827,note:"bottom"},{x:1553,y:939,parent:["71"],parentType:"Piste",lat:63.40818056157737,lng:13.07775181098972,note:"top"},{x:1515,y:902,parent:["71","\xc530"],parentType:"Piste",lat:63.40728045022514,lng:13.078556751089815,note:"intersect"},{x:1598,y:1011,parent:["71"],parentType:"Piste",lat:63.405075374885456,lng:13.079221250698554,note:"mid bottom "},{x:1754,y:1070,parent:["73","74"],parentType:"Piste",lat:63.405009993496954,lng:13.085319583007129,note:"intersect"},{x:1310,y:654,parent:["58A","82A"],parentType:"Piste",lat:63.41318361959545,lng:13.075781066749283,note:"intersect"},{x:1311,y:676,parent:["58A"],parentType:"Piste",lat:63.41280158424543,lng:13.074724248907286,note:"right curve "},{x:1271,y:697,parent:["58A"],parentType:"Piste",lat:63.41284073568956,lng:13.072680769852315,note:"left curve"},{x:1257,y:752,parent:["58A"],parentType:"Piste",lat:63.41174293696642,lng:13.069625840463818,note:"right curve"},{x:1194,y:785,parent:["57","58A"],parentType:"Piste",lat:63.410577528333654,lng:13.062957159215607,note:"intersect"},{x:1062,y:1148,parent:["58B"],parentType:"Piste",lat:63.40648785777008,lng:13.059507143262085,note:"left curve "},{x:1146,y:1104,parent:["58B"],parentType:"Piste",lat:63.407005633102656,lng:13.061593677415821,note:"lower right curve "},{x:1159,y:1020,parent:["58B"],parentType:"Piste",lat:63.408491868166756,lng:13.062499474081294,note:"upper right curve "},{x:1151,y:1062,parent:["58B"],parentType:"Piste",lat:63.40778818073048,lng:13.062377979846461,note:"middle"},{x:1101,y:1127,parent:["58B","\xc522"],parentType:"Piste",lat:63.40673679653903,lng:13.060267578898106,note:"intersect"},{x:2041,y:801,parent:["103"],parentType:"Piste",lat:63.40440473912105,lng:13.09546266024545,note:"large left curve"},{x:2169,y:701,parent:["103"],parentType:"Piste",lat:63.40719620825573,lng:13.10619138234566,note:"top left curve "},{x:2127,y:746,parent:["103"],parentType:"Piste",lat:63.40629826309062,lng:13.103647578839102,note:"right curve"},{x:1995,y:916,parent:["103","102"],parentType:"Piste",lat:63.40629826309062,lng:13.103647578839102,note:"bottom, intersect"},{x:2040,y:854,parent:["103"],parentType:"Piste",lat:63.40487172876848,lng:13.097051158079841,note:"right curve "},{x:2329,y:669,parent:["102C"],parentType:"Piste",lat:63.40797376049978,lng:13.112090425463805,note:"left curve "},{x:2282,y:788,parent:["102C","102B"],parentType:"Piste",lat:63.40493209947838,lng:13.108186100647913,note:"intersect"},{x:2417,y:733,parent:["102C","102B"],parentType:"Piste",lat:63.4044762217291,lng:13.112319183690046,note:"big right curve"},{x:2367,y:775,parent:["102C","104"],parentType:"Piste",lat:63.404370225782415,lng:13.111590869224989,note:"intersect"},{x:2392,y:692,parent:["102C"],parentType:"Piste",lat:63.40595287523626,lng:13.113353878457712,note:"beginning right curve "},{x:2208,y:807,parent:["102C"],parentType:"Piste",lat:63.40480189466551,lng:13.106410074002882,note:"slight right curve "},{x:2178,y:809,parent:["102C","\xc535"],parentType:"Piste",lat:63.404893584646516,lng:13.103851950289304,note:"intersect"},{x:2117,y:822,parent:["102C","102A"],parentType:"Piste",lat:63.40539502228751,lng:13.09843707258544,note:"intersect"},{x:2041,y:905,parent:["102C","104"],parentType:"Piste",lat:63.4042111375034,lng:13.095318872242707,note:"intersect"},{x:1920,y:900,parent:["102C"],parentType:"Piste",lat:63.405403247521775,lng:13.094251960519498,note:"left bottom curve "},{x:2265,y:709,parent:["102A"],parentType:"Piste",lat:63.4072502863192,lng:13.109190881948395,note:"right curve "},{x:2182,y:751,parent:["102A"],parentType:"Piste",lat:63.40653027156848,lng:13.106163649918544,note:"left curve"},{x:2359,y:726,parent:["102B"],parentType:"Piste",lat:63.40649279574211,lng:13.112626130808009,note:"right curve "},{x:2322,y:744,parent:["102B"],parentType:"Piste",lat:63.40568996690946,lng:13.109666751894045,note:"left curve"},{x:2357,y:798,parent:["104"],parentType:"Piste",lat:63.40346846773463,lng:13.109513878001259,note:"top right curve "},{x:2268,y:819,parent:["104"],parentType:"Piste",lat:63.40377958121467,lng:13.105044236034477,note:"straight "},{x:2140,y:858,parent:["104"],parentType:"Piste",lat:63.404418353143974,lng:13.103343424653223,note:"slight left "},{x:2028,y:914,parent:["102C"],parentType:"Piste",lat:63.40356594170265,lng:13.096960387957983,note:"intersect"},{x:1968,y:1055,parent:["102C"],parentType:"Piste",lat:63.40182754949222,lng:13.093474501900495,note:"bottom right curve "},{x:2035,y:931,parent:["102C","\xc535"],parentType:"Piste",lat:63.40288685110408,lng:13.095434865152944,note:"intersect"},{x:1681,y:843,parent:["47","\xc531","73A"],parentType:"Piste",lat:63.40808880273803,lng:13.085158508624216,note:"intersect"},{x:1730,y:921,parent:["73A","73B"],parentType:"Piste",lat:63.409217491352855,lng:13.08756490012628,note:"intersect"},{x:1752,y:859,parent:["47","73B"],parentType:"Piste",lat:63.40833161095595,lng:13.087146141968491,note:"intersect"},{x:1725,y:1042,parent:["73B"],parentType:"Piste",lat:63.405009993496954,lng:13.085319583007129,note:"left curve"},{x:1732,y:948,parent:["73B"],parentType:"Piste",lat:63.40583144442143,lng:13.08533669858936,note:"right curve"},{x:1712,y:892,parent:["73A","72"],parentType:"Piste",lat:63.40662538531294,lng:13.085153802522749,note:"intersect"},{x:1678,y:983,parent:["72"],parentType:"Piste",lat:63.40507290837215,lng:13.082603253745567},{x:1675,y:1133,parent:["72"],parentType:"Piste",lat:63.40358916560506,lng:13.080930768784844,note:"right curve"},{x:1783,y:926,parent:["77","74"],parentType:"Piste",lat:63.40794841520704,lng:13.089485483256333,note:"intersect"},{x:1788,y:1002,parent:["74"],parentType:"Piste",lat:63.40558675198305,lng:13.087654792626523,note:"right curve"},{x:1713,y:1135,parent:["74"],parentType:"Piste",lat:63.40325352435862,lng:13.082742139390593,note:"right curve"},{x:1593,y:678,parent:["82","77"],parentType:"Piste",lat:63.41141438991725,lng:13.081805336432545,note:"intersect"},{x:1724,y:748,parent:["77","\xc531"],parentType:"Piste",lat:63.410107192485995,lng:13.088796597796456,note:"intersect"},{x:1660,y:712,parent:["77"],parentType:"Piste",lat:63.41074208416265,lng:13.086202246407819,note:"halfway"},{x:1799,y:846,parent:["77","75"],parentType:"Piste",lat:63.41074208416265,lng:13.086202246407819,note:"intersect"},{x:1803,y:857,parent:["47","77"],parentType:"Piste",lat:63.40794841520704,lng:13.089485483256333,note:"intersect"},{x:1799,y:848,parent:["77","75"],parentType:"Piste",lat:63.40794655677759,lng:13.089484327019866},{x:1783,y:806,parent:["77","76A"],parentType:"Piste",lat:63.409048725221325,lng:13.089496224602465,note:"intersect"},{x:1911,y:888,parent:["76A"],parentType:"Piste",lat:63.406207918379074,lng:13.093178090335721,note:"right curve "},{x:1826,y:798,parent:["76B"],parentType:"Piste",lat:63.408887601375156,lng:13.091374787375084,note:"right curve"},{x:1850,y:876,parent:["75"],parentType:"Piste",lat:63.40697255991824,lng:13.09073973449868},{x:1744,y:805,parent:["73B","74","79"],parentType:"Piste",lat:63.409217491352855,lng:13.08756490012628,note:"intersect"},{x:1668,y:753,parent:["79"],parentType:"Piste",lat:63.40981836840784,lng:13.085673890119137},{x:1265,y:730,parent:["47","58A","78"],parentType:"Piste",lat:63.41240847351058,lng:13.070733838733032,note:"intersect"},{x:1514,y:723,parent:["78"],parentType:"Piste",lat:63.410927210874746,lng:13.079786324436714,note:"right curve "},{x:1404,y:724,parent:["78","\xc529"],parentType:"Piste",lat:63.41140426223972,lng:13.077405415326288},{x:1303,y:722,parent:["78"],parentType:"Piste",lat:63.41252260526075,lng:13.072302204207604},{x:1201,y:756,parent:["57"],parentType:"Piste",lat:63.41272062137,lng:13.067273578562157,note:"right curve"},{x:600,y:703,parent:["46","51","52"],parentType:"Piste",lat:63.41713858355981,lng:13.046039746943151,note:"intersect"},{x:536,y:820,parent:["51"],parentType:"Piste",lat:63.41350087402151,lng:13.044043076400968},{x:612,y:886,parent:["52","51","53"],parentType:"Piste",lat:63.41225242664772,lng:13.045994002290925,note:"intersect"},{x:691,y:767,parent:["53","54"],parentType:"Piste",lat:63.416065017248116,lng:13.049410074103388,note:"intersect"},{x:546,y:819,parent:["52"],parentType:"Piste",lat:63.413891094853724,lng:13.044700676674962,note:"left curve"},{x:619,y:801,parent:["53"],parentType:"Piste",lat:63.41384735418572,lng:13.047315853447778,note:"left curve"},{x:739,y:932,parent:["54"],parentType:"Piste",lat:63.41145533073764,lng:13.050852520020019,note:"right curve "},{x:665,y:786,parent:["53","\xc521"],parentType:"Piste",lat:63.41408100628351,lng:13.048236135798582,note:"intersect"},{x:730,y:854,parent:["54","50"],parentType:"Piste",lat:63.41408100628351,lng:13.048236135798582,note:"intersect"},{x:289,y:704,parent:["37"],parentType:"Piste",lat:63.418189683512004,lng:13.035752064021441,note:"left curve"},{x:311,y:729,parent:["37"],parentType:"Piste",lat:63.417612975726264,lng:13.03634555771635,note:"right curve"},{x:271,y:769,parent:["37"],parentType:"Piste",lat:63.41653588111302,lng:13.036005793023131,note:"left curve "},{x:267,y:893,parent:["\xc5R1"],parentType:"Piste",lat:63.41342983212808,lng:13.036755524845155,note:"bottom"},{x:270,y:842,parent:["\xc5R1"],parentType:"Piste",lat:63.414009640226496,lng:13.036241623392124,note:"top"},{x:1041,y:1081,parent:["57"],parentType:"Piste",lat:63.40761932107776,lng:13.059523683699306,note:"left curve "},{x:1094,y:954,parent:["58B","57","\xc522"],parentType:"Piste",lat:63.40971446346589,lng:13.061763721298956,note:"intersect"},{x:1163,y:842,parent:["50","57"],parentType:"Piste",lat:63.41096192207126,lng:13.064618176757156},{x:1952,y:965,parent:["101"],parentType:"Piste",lat:63.40336098660835,lng:13.092268085788046,note:"right curve"},{x:1912,y:1030,parent:["101"],parentType:"Piste",lat:63.40234186343711,lng:13.090406431001638,note:"left curve"},{x:2032,y:994,parent:["102C"],parentType:"Piste",lat:63.40257151003498,lng:13.095100588011537,note:"right curve bottom"},{x:1192,y:851,parent:[],parentType:"Terrain",lat:63.4106718271936,lng:13.065661729192101},{x:1180,y:860,parent:[],parentType:"Terrain",lat:63.410614556184115,lng:13.065165489495087},{x:1125,y:883,parent:[],parentType:"Terrain",lat:63.41017009263206,lng:13.063362374809566},{x:1114,y:922,parent:[],parentType:"Terrain",lat:63.40978012726712,lng:13.062804501770362},{x:1493,y:1040,parent:[],parentType:"Terrain",lat:63.40479933635118,lng:13.076325847083528},{x:1434,y:845,parent:[],parentType:"Terrain",lat:63.40836274744978,lng:13.076799029330232},{x:1393,y:823,parent:[],parentType:"Terrain",lat:63.40919979553521,lng:13.07640073768073},{x:1296,y:837,parent:[],parentType:"Terrain",lat:63.40969398685661,lng:13.071174392691626},{x:1316,y:996,parent:[],parentType:"Terrain",lat:63.40692906306317,lng:13.069430696845314},{x:1118,y:946,parent:[],parentType:"Terrain",lat:63.409297557178924,lng:13.062930195661897},{x:1499,y:1059,parent:[],parentType:"Terrain",lat:63.404521443429104,lng:13.076364439916496},{x:1508,y:1093,parent:[],parentType:"Terrain",lat:63.40419828148309,lng:13.076359033584595},{x:1169,y:1102,parent:[],parentType:"Terrain",lat:63.405775236407514,lng:13.060222864151001},{x:1180,y:1011,parent:[],parentType:"Terrain",lat:63.406603210915506,lng:13.060609102249146},{x:1278,y:1005,parent:[],parentType:"Terrain",lat:63.406883649685945,lng:13.068290948867798},{x:1122,y:1154,parent:[],parentType:"Terrain",lat:63.40514052344367,lng:13.060024480362085},{x:1257,y:1169,parent:[],parentType:"Terrain",lat:63.40458936977376,lng:13.064185405672347},{x:1608,y:1088,parent:[],parentType:"Terrain",lat:63.4039918723127,lng:13.078562194917085},{x:1569,y:1101,parent:[],parentType:"Terrain",lat:63.40425599440898,lng:13.077532226655366},{x:1592,y:1144,parent:[],parentType:"Terrain",lat:63.402686236245174,lng:13.077221090409639},{x:1582,y:1140,parent:[],parentType:"Terrain",lat:63.402773167917076,lng:13.07695823392618},{x:1376,y:769,parent:[],parentType:"Terrain",lat:63.41004905929894,lng:13.076380740195663},{x:1278,y:743,parent:[],parentType:"Terrain",lat:63.412095664472105,lng:13.07095731356755},{x:1191,y:830,parent:[],parentType:"Terrain",lat:63.410839412669276,lng:13.06621516802922},{x:1382,y:802,parent:[],parentType:"Terrain",lat:63.409410471561664,lng:13.076509393635844},{x:990,y:757,parent:[],parentType:"Terrain",lat:63.41460845731158,lng:13.061971137613519},{x:1008,y:842,parent:[],parentType:"Terrain",lat:63.412010678503265,lng:13.060066769212945},{x:1008,y:832,parent:[],parentType:"Terrain",lat:63.412329479383864,lng:13.060517380327447},{x:916,y:842,parent:[],parentType:"Terrain",lat:63.41276074115119,lng:13.05736060083528},{x:934,y:793,parent:[],parentType:"Terrain",lat:63.413780579713986,lng:13.059678029424147},{x:973,y:807,parent:[],parentType:"Terrain",lat:63.413035267583695,lng:13.059806775456861},{x:1088,y:725,parent:[],parentType:"Terrain",lat:63.413912971122905,lng:13.065261358266968},{x:1181,y:763,parent:[],parentType:"Terrain",lat:63.4127988647659,lng:13.067122811323303},{x:1142,y:835,parent:[],parentType:"Terrain",lat:63.411399464994865,lng:13.06472491646399},{x:1089,y:838,parent:[],parentType:"Terrain",lat:63.41156027611112,lng:13.062348479276794},{x:1077,y:735,parent:[],parentType:"Terrain",lat:63.41359613851987,lng:13.063335532194275},{x:1060,y:746,parent:[],parentType:"Terrain",lat:63.41372520152482,lng:13.062643522268433},{x:1028,y:785,parent:[],parentType:"Terrain",lat:63.41321809930081,lng:13.061613554006714},{x:1057,y:842,parent:[],parentType:"Terrain",lat:63.41174867888928,lng:13.06144189262976},{x:1071,y:842,parent:[],parentType:"Terrain",lat:63.41166798322726,lng:13.061892503744263},{x:874,y:825,parent:[],parentType:"Terrain",lat:63.41311084363748,lng:13.056397048064028},{x:996,y:698,parent:[],parentType:"Terrain",lat:63.41515436072497,lng:13.06034525973395},{x:672,y:714,parent:[],parentType:"Terrain",lat:63.41687730399193,lng:13.04795545033547},{x:909,y:760,parent:[],parentType:"Terrain",lat:63.41420581314309,lng:13.058298048296896},{x:798,y:779,parent:[],parentType:"Terrain",lat:63.41474350725639,lng:13.053352054873434},{x:872,y:844,parent:[],parentType:"Terrain",lat:63.41264804129868,lng:13.055967098945759},{x:760,y:849,parent:[],parentType:"Terrain",lat:63.41272291951955,lng:13.051975971931599},{x:739,y:767,parent:[],parentType:"Terrain",lat:63.41546551848495,lng:13.050388104194782},{x:873,y:861,parent:[],parentType:"Terrain",lat:63.41232187233887,lng:13.055318004364155},{x:759,y:866,parent:[],parentType:"Terrain",lat:63.412354784639604,lng:13.0511778450186},{x:633,y:989,parent:[],parentType:"Terrain",lat:63.409674830523976,lng:13.049185112405878},{x:758,y:930,parent:[],parentType:"Terrain",lat:63.411414811581416,lng:13.051305485787354},{x:929,y:1143,parent:[],parentType:"Terrain",lat:63.407403992475146,lng:13.055356284529513},{x:927,y:990,parent:[],parentType:"Terrain",lat:63.41010957648907,lng:13.056192833939777},{x:919,y:1017,parent:[],parentType:"Terrain",lat:63.40913385249782,lng:13.056192614912101},{x:890,y:1062,parent:[],parentType:"Terrain",lat:63.40830706838928,lng:13.05530160494753},{x:755,y:1018,parent:[],parentType:"Terrain",lat:63.40928991147409,lng:13.052920130057801},{x:671,y:1042,parent:[],parentType:"Terrain",lat:63.4080304601011,lng:13.053070333762635},{x:920,y:865,parent:[],parentType:"Terrain",lat:63.412172806873706,lng:13.057560351653565},{x:996,y:890,parent:[],parentType:"Terrain",lat:63.410956486811564,lng:13.05943650830824},{x:1001,y:860,parent:[],parentType:"Terrain",lat:63.41176682961544,lng:13.059822746406384},{x:998,y:874,parent:[],parentType:"Terrain",lat:63.41127623450801,lng:13.059564936339049},{x:961,y:860,parent:[],parentType:"Terrain",lat:63.41203854913617,lng:13.058567154585509},{x:1049,y:860,parent:[],parentType:"Terrain",lat:63.411490830261684,lng:13.061168897329955},{x:1073,y:860,parent:[],parentType:"Terrain",lat:63.411417599518714,lng:13.061855542837767},{x:1074,y:903,parent:[],parentType:"Terrain",lat:63.41055127164045,lng:13.061340558706908},{x:1035,y:887,parent:[],parentType:"Terrain",lat:63.41086723749023,lng:13.060739743887572},{x:1055,y:988,parent:[],parentType:"Terrain",lat:63.40897874389556,lng:13.06052516716638},{x:1031,y:1056,parent:[],parentType:"Terrain",lat:63.40751276453706,lng:13.058937299429564},{x:1031,y:1021,parent:[],parentType:"Terrain",lat:63.408263549159535,lng:13.059212115230281},{x:1051,y:1013,parent:[],parentType:"Terrain",lat:63.408334594969574,lng:13.059705111444252},{x:1104,y:996,parent:[],parentType:"Terrain",lat:63.40906514805469,lng:13.061749451460445},{x:1059,y:1124,parent:[],parentType:"Terrain",lat:63.407017642016704,lng:13.059882379779623},{x:1125,y:1095,parent:[],parentType:"Terrain",lat:63.407352632488404,lng:13.061513162860678},{x:1132,y:1022,parent:[],parentType:"Terrain",lat:63.40822596066718,lng:13.062119342098043},{x:1085,y:1008,parent:[],parentType:"Terrain",lat:63.408219957470926,lng:13.060628033885763},{x:1110,y:1105,parent:[],parentType:"Terrain",lat:63.407236616965946,lng:13.060751415500448},{x:994,y:1139,parent:[],parentType:"Terrain",lat:63.40693284318091,lng:13.057318187961386},{x:942,y:1068,parent:[],parentType:"Terrain",lat:63.40831480782476,lng:13.056567169437216},{x:983,y:986,parent:[],parentType:"Terrain",lat:63.40957184554607,lng:13.057543493518637},{x:1023,y:978,parent:[],parentType:"Terrain",lat:63.40933532976252,lng:13.059120632419393},{x:994,y:1029,parent:[],parentType:"Terrain",lat:63.40791540617246,lng:13.058101392993734},{x:975,y:1131,parent:[],parentType:"Terrain",lat:63.40716018604356,lng:13.056899763355062},{x:1722,y:492,parent:[],parentType:"Terrain",lat:63.419787153717046,lng:13.101471527141987},{x:1419,y:600,parent:[],parentType:"Terrain",lat:63.41746658423159,lng:13.082963751629512},{x:1240,y:309,parent:[],parentType:"Terrain",lat:63.42665589301256,lng:13.077449129894893},{x:1265,y:316,parent:[],parentType:"Terrain",lat:63.42630642945518,lng:13.078736590222041},{x:1252,y:714,parent:[],parentType:"Terrain",lat:63.412871641910414,lng:13.070904539898555},{x:1260,y:688,parent:[],parentType:"Terrain",lat:63.41321346648585,lng:13.072192000225703},{x:1297,y:660,parent:[],parentType:"Terrain",lat:63.41317115128529,lng:13.075110243633906},{x:1341,y:559,parent:[],parentType:"Terrain",lat:63.41464809490181,lng:13.077427672222774},{x:1061,y:577,parent:[],parentType:"Terrain",lat:63.41817789757438,lng:13.066355443990307},{x:1094,y:623,parent:[],parentType:"Terrain",lat:63.416791306995975,lng:13.066140867269116},{x:1084,y:629,parent:["59"],parentType:"Piste",lat:63.416830069902694,lng:13.06567732015914,note:"right curve "},{x:1111,y:676,parent:["59"],parentType:"Terrain",lat:63.41584571607899,lng:13.06597888469696},{x:1321,y:665,parent:["59"],parentType:"Terrain",lat:63.412907594456904,lng:13.075608015060425},{x:1275,y:721,parent:["59"],parentType:"Terrain",lat:63.412627102042556,lng:13.072453737258911},{x:1541,y:699,parent:["59"],parentType:"Terrain",lat:63.41113460530437,lng:13.081001277461262},{x:1942,y:894,parent:["59"],parentType:"Terrain",lat:63.405644113888414,lng:13.095206256404133},{x:2249,y:636,parent:["59"],parentType:"Terrain",lat:63.40916328804365,lng:13.112458224787922},{x:2049,y:929,parent:["59"],parentType:"Terrain",lat:63.40282173131638,lng:13.095665891047878},{x:2141,y:869,parent:["59"],parentType:"Terrain",lat:63.40399735440244,lng:13.103261906978053},{x:1965,y:1092,parent:["59"],parentType:"Terrain",lat:63.400715336171295,lng:13.090086896296901},{x:2238,y:1217,parent:["59"],parentType:"Terrain",lat:63.394712321276735,lng:13.096647262573242},{x:1964,y:1134,parent:["59"],parentType:"Terrain",lat:63.400159268009965,lng:13.08921217918396},{x:2300,y:1182,parent:["59"],parentType:"Terrain",lat:63.39833342494399,lng:13.094049690533737},{x:2085,y:1106,parent:["59"],parentType:"Terrain",lat:63.39975153349091,lng:13.091646431256393},{x:1312,y:318,parent:["59"],parentType:"Terrain",lat:63.427084049141094,lng:13.081272167844107},{x:1368,y:343,parent:["59"],parentType:"Terrain",lat:63.42494913716325,lng:13.08693699328356},{x:1359,y:479,parent:["59"],parentType:"Terrain",lat:63.42049071699194,lng:13.083246273679068},{x:580,y:719,parent:["59"],parentType:"Terrain",lat:63.41690736782309,lng:13.04520516774716},{x:376,y:825,parent:["59"],parentType:"Terrain",lat:63.41451241772016,lng:13.038918069816251},{x:628,y:917,parent:["59"],parentType:"Terrain",lat:63.410766456147385,lng:13.04818241975369},{x:530,y:807,parent:["59"],parentType:"Terrain",lat:63.41405175099032,lng:13.043343714690824},{x:619,y:717,parent:["59"],parentType:"Terrain",lat:63.416794222861384,lng:13.046304873443265},{x:597,y:861,parent:["59"],parentType:"Terrain",lat:63.412698534294414,lng:13.045802805114635},{x:651,y:780,parent:["59"],parentType:"Terrain",lat:63.414211964078625,lng:13.047862741638072},{x:640,y:721,parent:["59"],parentType:"Terrain",lat:63.4167547243898,lng:13.047004434753307},{x:602,y:812,parent:["59"],parentType:"Terrain",lat:63.41375476245034,lng:13.0466611119994},{x:655,y:801,parent:["59"],parentType:"Terrain",lat:63.41355879522772,lng:13.047862741638072},{x:624,y:878,parent:["59"],parentType:"Terrain",lat:63.412331232838056,lng:13.046502686607514},{x:669,y:865,parent:["59"],parentType:"Terrain",lat:63.41221403698148,lng:13.048498250114594},{x:951,y:421,parent:["59"],parentType:"Terrain",lat:63.42835914216771,lng:13.065950582211125},{x:925,y:640,parent:["59"],parentType:"Terrain",lat:63.419488725748444,lng:13.055758187954533},{x:359,y:548,parent:["59"],parentType:"Terrain",lat:63.429370963558846,lng:13.032393951538474},{x:582,y:562,parent:["59"],parentType:"Terrain",lat:63.42763546701358,lng:13.045783538940817},{x:106,y:868,parent:["59"],parentType:"Terrain",lat:63.4150448737033,lng:13.027610202093145},{x:556,y:969,parent:["59"],parentType:"Terrain",lat:63.41042434019342,lng:13.04596724059107},{x:446,y:991,parent:["59"],parentType:"Terrain",lat:63.40944827879488,lng:13.036633153219244},{x:615,y:1025,parent:["59"],parentType:"Terrain",lat:63.40785745563486,lng:13.050065655965826},{x:21,y:1023,parent:["59"],parentType:"Terrain",lat:63.407668952251036,lng:13.026590962667486},{x:429,y:1196,parent:["59"],parentType:"Terrain",lat:63.4057307549421,lng:13.04071011092188},{x:700,y:1183,parent:["59"],parentType:"Terrain",lat:63.405533629217246,lng:13.053373253415316},{x:519,y:969,parent:["59"],parentType:"Terrain",lat:63.4103231409226,lng:13.045621669362276},{x:914,y:266,parent:["59"],parentType:"Terrain",lat:63.447648633011376,lng:13.070955915533622,note:"V\xe4sterskutan"},{x:1440,y:209,parent:["59"],parentType:"Terrain",lat:63.43092739532498,lng:13.093278408050537,note:"\xc5reskutan"},{x:1823,y:417,parent:["59"],parentType:"Terrain",lat:63.420172884557715,lng:13.110527523876495,note:"Lillskutan"},{x:1145,y:246,parent:["59"],parentType:"Terrain",lat:63.4410437011604,lng:13.09375179565933},{x:649,y:707,parent:["\xc521","48","46","54"],parentType:"Lift",lat:63.41691485338856,lng:13.047247484836685,note:"top"},{x:730,y:422,parent:["H25","83","84"],parentType:"Lift",lat:63.436186411058706,lng:13.063750171248007,note:"bottom"},{x:779,y:460,parent:["H24","84","87","86"],parentType:"Lift",lat:63.43275673149308,lng:13.052910479182822,note:"top"},{x:1044,y:350,parent:["H25","83"],parentType:"Lift",lat:63.429118371162204,lng:13.067902549519394,note:"top"},{x:1565,y:690,parent:["\xc532","78","79"],parentType:"Lift",lat:63.4113123577683,lng:13.082956916832584,note:"top"},{x:1368,y:503,parent:["81","80","82"],parentType:"Piste",lat:63.41983877848655,lng:13.082176580701631,note:"bottom"},{x:1240,y:269,parent:["H23","81","60","59"],parentType:"Lift",lat:63.42766156294758,lng:13.077995937113478,note:"top"},{x:61,y:607,parent:["\xc514","32","31","33"],parentType:"Lift",lat:63.43041227213233,lng:13.01626234486621,note:"bottom"},{x:349,y:825,parent:["\xc519","45","46","34","44"],parentType:"Lift",lat:63.42532786897293,lng:13.042984094003275,note:"top"},{x:359,y:646,parent:["42","43"],parentType:"Piste",lat:63.42150716231424,lng:13.03864565687141,note:"intersect"},{x:333,y:680,parent:["\xc517","37"],parentType:"Lift",lat:63.41937139472147,lng:13.036954356984308,note:"top"},{x:"338",y:554,parent:["33","34","36","40"],parentType:"Piste",lat:63.42854345628307,lng:13.031261017694336,note:"intersect"},{x:461,y:568,parent:["\xc519","42","47","44","36"],parentType:"Lift",lat:63.42532786897293,lng:13.042984094003275,note:"top"},{x:264,y:546,parent:["33"],parentType:"Piste",lat:63.42979557853516,lng:13.031802549371315,note:"top"},{x:1197,y:287,parent:["H27","35"],parentType:"Lift",lat:63.42764388004626,lng:13.076574048761538,note:"top"},{x:1361,y:555,parent:["82","82B","82A"],parentType:"Piste",lat:63.41558521547777,lng:13.079446376669818,note:"split"},{x:1082,y:681,parent:["47","59"],parentType:"Piste",lat:63.41571257934785,lng:13.065177293399062,note:"intersect"},{x:905,y:850,parent:["48","50","55"],parentType:"Piste",lat:63.41251103998558,lng:13.05683173490483,note:"intersect"},{x:1016,y:688,parent:["H23","48","55"],parentType:"Lift",lat:63.41566728873634,lng:13.062462075526362,note:"bottom"},{x:1489,y:771,parent:["\xc530","71B","47","50"],parentType:"Lift",lat:63.40911422526361,lng:13.07926328969112,note:"topp"},{x:1873,y:837,parent:["\xc532","76A","76B","47"],parentType:"Lift",lat:63.4082746543262,lng:13.092939418688436,note:"bottom"},{x:1889,y:1064,parent:["\xc535","101","102"],parentType:"Lift",lat:63.40107502927062,lng:13.087840282772287,note:"bottom"},{x:1620,y:1179,parent:["\xc531","48","71","74"],parentType:"Lift",lat:63.402594161205606,lng:13.0773266910874,note:"bottom"},{x:1728,y:735,parent:["\xc531","76B"],parentType:"Lift",lat:63.41055698485778,lng:13.089483752932209,note:"top"},{x:2286,y:650,parent:["\xc534","102C","103","105"],parentType:"Lift",lat:63.40854933392874,lng:13.112128219699025,note:"top"},{x:2347,y:693,parent:["\xc535","102B"],parentType:"Lift",lat:63.40700162531407,lng:13.112693803807574,note:"top"},{x:1888,y:928,parent:["101","102C"],parentType:"Piste",lat:63.40487757965308,lng:13.091259988379655},{x:1110,y:1237,parent:["\xc522","55","56","57","58B"],parentType:"Lift",lat:63.40357744280534,lng:13.059068209689716,note:"bottom"},{x:697,y:955,parent:["\xc521","53","54"],parentType:"Lift",lat:63.409785883595866,lng:13.04977297782898,note:"bottom"},{x:502,y:508,parent:["\xc514","32"],parentType:"Lift",lat:63.42970265651635,lng:13.039512087195817,note:"top"},{x:556,y:507,parent:["34","35"],parentType:"Piste",lat:63.43040793295748,lng:13.040870061137753,note:"top"},{x:605,y:490,parent:["H24","86","87"],parentType:"Lift",lat:63.43531687461399,lng:13.043966652970944,note:"bottom"},{x:283,y:"1361",parent:[],parentType:"Terrain",lat:63.40238226206975,lng:13.039241734000147},{x:2180,y:1414,parent:[],parentType:"Terrain",lat:63.39399248714377,lng:13.0879294458349},{x:2122,y:1378,parent:[],parentType:"Terrain",lat:63.39454644530334,lng:13.087858985190381},{x:1626,y:1315,parent:[],parentType:"Terrain",lat:63.39874808557246,lng:13.076584339141846},{x:499,y:1345,parent:[],parentType:"Terrain",lat:63.403173220344684,lng:13.043146504566634},{x:22,y:1243,parent:[],parentType:"Terrain",lat:63.40466914670977,lng:13.03269713403874},{x:1322,y:1325,parent:[],parentType:"Terrain",lat:63.401435585150075,lng:13.065669144018694},{x:1669,y:1392,parent:[],parentType:"Terrain",lat:63.39682199040094,lng:13.074344094242857},{x:1224,y:1299,parent:[],parentType:"Terrain",lat:63.40227227254611,lng:13.062717253262903},{x:794,y:1359,parent:[],parentType:"Terrain",lat:63.40212884989753,lng:13.052775981973571},{x:2403,y:1378,parent:[],parentType:"Terrain",lat:63.3901011904337,lng:13.094295946856391}]),f=n(87),b=n(21),m=(n(51),n(86)),v=n(54),O=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).changeFileType=function(e){var t=e.target.value;a.setState({fileType:t})},a.download=function(e){var t;e.preventDefault();var n=a.props.points;if("json"===a.state.fileType)t=JSON.stringify({triangles:a.props.triangles},null,4);else if("csv"===a.state.fileType){var r=[];r.push(["x","y","long","lat","parent","parentType","note"]),n.map((function(e){return r.push([e.x,e.y,e.lng,e.lat,e.parent,e.parentType,e.note])})),t=a.makeCSV(r)}else"text"===a.state.fileType&&(t="",n.map((function(e){return t+="x:"+e.x+",y:"+e.y,t+=",long:"+e.long+",lat:"+e.lat,t+=",parent:["+e.parent+"],parentType:"+e.parentType,t+=",note:"+e.note+"\n"})));var p=new Blob([t]),l=URL.createObjectURL(p);a.setState({fileDownloadUrl:l},(function(){a.dofileDownload.click(),URL.revokeObjectURL(l),a.setState({fileDownloadUrl:""})}))},a.upload=function(e){e.preventDefault(),a.dofileUpload.click()},a.makeCSV=function(e){var t="";return e.forEach((function(e){e.forEach((function(e,n){var a=(void 0===e?"":e.toString()).replace(/"/g,'""');a.search(/("|,|\n)/g)>=0&&(a='"'+a+'"'),n>0&&(t+=","),t+=a})),t+="\n"})),t},a.openFile=function(e){var t=e.target.files[0],n=new FileReader;if(t instanceof Blob){var r=function(e){var t=e.target.result;try{var n=JSON.parse(t);n.hasOwnProperty("pistePoints")?a.props.loadPointData(n.pistePoints):n.hasOwnProperty("triangles")&&a.props.loadTriangleData(n.triangles)}catch(e){alert(e)}};r=r.bind(Object(b.a)(a)),n.onload=r,n.readAsText(t)}},a.downloadTestReport=function(e){console.log("generating test report"),e.preventDefault();var t=a.props.generateTestReport(),n=JSON.stringify({testReport:t},null,4),r=new Blob([n]),p=URL.createObjectURL(r);a.setState({fileDownloadUrl:URL.createObjectURL(r)},(function(){a.doTestReportDownload.click(),URL.revokeObjectURL(p),a.setState({fileDownloadUrl:""})}))};var r=a.props.imgSrc,p=r.substr(r.lastIndexOf("/")+1,r.length);return p=p.substr(0,p.lastIndexOf(".")),a.fileNames={json:String(p)+".json",csv:String(p)+".csv",text:String(p)+".txt"},a.state={fileType:"json",fileDownloadUrl:null,resort:p},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{id:"fileForm",children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(m.a,{className:"justify-content-md-center",children:Object(a.jsxs)(v.a,{md:"auto",children:[Object(a.jsx)(f.a,{className:"",variant:"primary",onClick:this.downloadTestReport,children:"Generate Test Report"}),Object(a.jsx)("a",{className:"hidden",download:"testReport.json",href:this.state.fileDownloadUrl,ref:function(t){return e.doTestReportDownload=t},children:"download it"})]})}),Object(a.jsxs)(m.a,{className:"justify-content-md-center",children:[Object(a.jsx)(v.a,{md:"auto",children:Object(a.jsxs)(h.a.Control,{as:"select",name:"fileType",className:"fileForm-child",onChange:this.changeFileType,value:this.state.fileType,children:[Object(a.jsx)("option",{value:"csv",children:"CSV"}),Object(a.jsx)("option",{value:"json",children:"JSON"}),Object(a.jsx)("option",{value:"text",children:"Text"})]})}),Object(a.jsxs)(v.a,{md:"auto",children:[Object(a.jsx)(f.a,{onClick:this.download,className:"fileForm-child",children:"Download"}),Object(a.jsx)("a",{className:"hidden",download:this.fileNames[this.state.fileType],href:this.state.fileDownloadUrl,ref:function(t){return e.dofileDownload=t},children:"download it"})]}),Object(a.jsxs)(v.a,{md:"auto",children:[Object(a.jsx)(f.a,{onClick:this.upload,className:"fileForm-child",children:"Upload"}),Object(a.jsx)("input",{type:"file",className:"hidden",multiple:!1,accept:".json,application/json",onChange:function(t){return e.openFile(t)},ref:function(t){return e.dofileUpload=t}})]})]})]})})}}]),n}(p.a.Component),P=n(14),C=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),p=0;p<a;p++)r[p]=arguments[p];return(e=t.call.apply(t,[this].concat(r))).updateCanvas=function(){var t=e.refs.canvas,n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.strokeStyle="red";var a,r,p=e.props.triangles;for(a=0;a<p.length;a++)r=p[a],n.beginPath(),n.moveTo(r.p1.x,r.p1.y),n.lineTo(r.p2.x,r.p2.y),n.lineTo(r.p3.x,r.p3.y),n.lineTo(r.p1.x,r.p1.y),n.stroke()},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.updateCanvas()}},{key:"getSnapshotBeforeUpdate",value:function(e){return{triangleUpdateRequired:e.triangles!==this.props.triangles}}},{key:"componentDidUpdate",value:function(e,t,n){n.triangleUpdateRequired&&this.updateCanvas()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return Object(a.jsx)("div",{id:"canvas",children:Object(a.jsx)("canvas",{ref:"canvas",width:t,height:n})})}}]),n}(p.a.Component),D=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),p=0;p<a;p++)r[p]=arguments[p];return(e=t.call.apply(t,[this].concat(r))).onMouseDown=function(t){t.stopPropagation(),e.props.moveDot(e.props.i)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dotX,n=e.dotY,r=e.styles,p=e.dotRadius;return Object(a.jsx)("div",{className:"react-image-dot",onMouseDown:this.onMouseDown,style:Object(P.a)(Object(P.a)({},r),{},{height:2*p,width:2*p,transform:"translate(".concat(-p,", ").concat(-p,")"),top:n||0,left:t||0})})}}]),n}(p.a.Component);D.defaultProps={dotRadius:1};var w=function(e){return e.show?Object(a.jsx)("div",{className:"modal-backdrop",onClick:e.clicked}):null},L=n(20),k=n(57);n(78);var S=[],M=[],R=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).loadMap=function(){window.initMap=a.initMap,function(e){var t=window.document.querySelector('script[src="'.concat(e,'"]'));t&&t.remove(),(t=window.document.createElement("script")).src=e,t.async=!0,window.document.body.appendChild(t)}("https://maps.googleapis.com/maps/api/js?key="+a.apiKey+"&callback=initMap")},a.getCenter=function(){return{lat:parseFloat(a.props.currentDot.lat)||63.42833519737357,lng:parseFloat(a.props.currentDot.lng)||13.078345603820786}},a.initMap=function(){var e=window.google,t=a.mapRef,n=a.state.zoom;t=new e.maps.Map(a.mapRef.current,{center:a.getCenter(),zoom:n,mapTypeId:e.maps.MapTypeId.HYBRID});var r=new e.maps.Marker({position:a.getCenter(),map:t,title:"Marker"});a.setState({map:t,google:e,currentMarker:r}),t.addListener("click",(function(e){r.setPosition(e.latLng),a.props.setLatLong(e.latLng),t.panTo(e.latLng)})),a.plotDotMarkers(),a.drawTriangles()},a.updateCurrentMarker=function(){var e=a.state,t=e.map,n=e.currentMarker,r=a.getCenter();n.setPosition(r),t.setCenter(r)},a.plotDotMarkers=function(){var e=a.state,t=e.google,n=e.map;S.map((function(e){return e.setMap(null)})),S=a.props.dots.map((function(e){var a=new t.maps.LatLng(e.lat,e.lng);return new t.maps.Marker({position:a,map:n,title:JSON.stringify(e.parent),icon:{path:t.maps.SymbolPath.CIRCLE,fillColor:"#00F",fillOpacity:.6,strokeColor:"#00A",strokeOpacity:.9,strokeWeight:1,scale:4}})}))},a.drawTriangles=function(){var e=a.state,t=e.google,n=e.map;M.map((function(e){return e.setMap(null)})),M=a.props.triangles.map((function(e){var a=[{lat:e.p1.lat,lng:e.p1.lng},{lat:e.p2.lat,lng:e.p2.lng},{lat:e.p3.lat,lng:e.p3.lng},{lat:e.p1.lat,lng:e.p1.lng}],r=new t.maps.Polyline({path:a,strokeColor:"#000000",strokeOpacity:.8,strokeWeight:1});return r.setMap(n),r}))},a.state={zoom:13,map:{},currentMarker:{},mapLoaded:!1,google:{}},a.apiKey="AIzaSyBZa_8-M20SrWIMlK3-s2lXEI4yBHwRsyA",a.mapRef=p.a.createRef(),a}return Object(s.a)(n,[{key:"getSnapshotBeforeUpdate",value:function(e){return{markerUpdateRequired:e.currentDot!==this.props.currentDot,dotMarkersUpdateRequired:e.dots!==this.props.dots,triangleUpdateRequired:e.triangles!==this.props.triangles}}},{key:"componentDidUpdate",value:function(e,t,n){n.markerUpdateRequired&&this.updateCurrentMarker(),n.dotMarkersUpdateRequired&&this.plotDotMarkers(),n.triangleUpdateRequired&&this.drawTriangles()}},{key:"componentDidMount",value:function(){this.loadMap()}},{key:"render",value:function(){return Object(a.jsx)("div",{id:"google-map",style:{height:"40vh",width:"100%"},children:Object(a.jsx)("div",{ref:this.mapRef,id:"map"})})}}]),n}(p.a.Component),N=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setLatLong=function(e){a.props.updateCurrentDot({lat:e.lat(),lng:e.lng()})},a.state={pisteInputValue:""},a.handleClose=a.handleClose.bind(Object(b.a)(a)),a.onChangeParentType=a.onChangeParentType.bind(Object(b.a)(a)),a.onKeyPress=a.onKeyPress.bind(Object(b.a)(a)),a}return Object(s.a)(n,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"getValueLabelList",value:function(e){if(Array.isArray(e)){var t=[];return e.map((function(e){return t.push({value:e,label:e})})),t}return[{value:e,label:e}]}},{key:"onChangeParentType",value:function(e){this.props.setCurrentParentType(e.target.value)}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.props.handleSave()}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.handleClose,p=t.parentTypes,l=window.innerWidth,o=this.props.posX>l/2?0:Math.round(.525*l);return Object(a.jsx)("div",{id:"geoCoordSelector",className:n?"":"hidden",children:Object(a.jsxs)("div",{className:"coord-selector",children:[Object(a.jsx)(w,{show:n,clicked:r}),Object(a.jsxs)(L.a,{className:"modal-body",style:{top:10,left:o},children:[Object(a.jsxs)(L.a.Body,{children:[Object(a.jsx)(L.a.Title,{children:"Select Coordinates"}),Object(a.jsx)(L.a.Text,{}),Object(a.jsxs)(h.a,{children:[Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,sm:"3",children:"x:"}),Object(a.jsx)(v.a,{sm:"3",children:Object(a.jsx)(h.a.Control,{type:"number",defaultValue:this.props.currentDot.x,onChange:function(t){e.props.updateCurrentDot({x:t.target.value})}})}),Object(a.jsx)(h.a.Label,{column:!0,sm:"3",children:"y:"}),Object(a.jsx)(v.a,{sm:"3",children:Object(a.jsx)(h.a.Control,{type:"number",defaultValue:this.props.currentDot.y,onChange:function(t){e.props.updateCurrentDot({y:t.target.value})}})})]}),Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,sm:"3",children:"lat:"}),Object(a.jsx)(h.a.Label,{column:!0,sm:"3",children:this.props.currentDot.lat}),Object(a.jsx)(h.a.Label,{column:!0,sm:"3",children:"lng:"}),Object(a.jsx)(h.a.Label,{column:!0,sm:"3",children:this.props.currentDot.lng})]}),Object(a.jsx)(h.a.Group,{children:Object(a.jsx)(R,{setLatLong:this.setLatLong,currentDot:this.props.currentDot,dots:this.props.dots,triangles:this.props.triangles})}),Object(a.jsx)("div",{children:p.map((function(t){return Object(a.jsxs)("span",{children:[Object(a.jsx)("input",{type:"radio",value:t,onChange:e.onChangeParentType,name:"type",className:"parent-type-selector",checked:e.props.currentParentType===t}),t]},t)}))}),"Terrain"===this.props.currentParentType?null:Object(a.jsxs)(h.a.Group,{children:["Select or add parent:",Object(a.jsx)(k.a,{isMulti:!0,onChange:function(t){return e.props.setCurrentParent(t)},defaultValue:this.getValueLabelList(this.props.currentParent),options:this.getValueLabelList(this.props.parents)})]}),Object(a.jsx)(h.a.Control,{type:"text",defaultValue:this.props.currentDot.note,placeholder:"Notes...",onChange:function(t){return e.props.updateCurrentDot({note:t.target.value})},onKeyPress:this.onKeyPress})]})]}),Object(a.jsxs)(L.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:r,children:"Delete"}),Object(a.jsx)(f.a,{variant:"secondary",onClick:r,children:"Close"}),Object(a.jsx)(f.a,{variant:"primary",onClick:this.props.handleSave,children:"Save"})]})]})]})})}}]),n}(p.a.Component),U=n(16),B=n.n(U),W=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).onLoadPisteMap=function(e){var t=e.target;a.setState({dimensions:{renderWidth:t.offsetWidth,renderHeight:t.offsetHeight,realWidth:t.naturalWidth,realHeight:t.naturalHeight}})},a.calcEstimatedGeoCoord=function(e){var t,n,r=1/0,p=Object(T.a)(a.props.triangles);try{for(p.s();!(n=p.n()).done;){var l=n.value;if(l.enclosesMapCoords(e))return l.transformMapCoords(e);var o=l.mapDistanceToPoint(e);o<r&&(r=o,t=l)}}catch(i){p.e(i)}finally{p.f()}return t?t.transformMapCoords(e):null},a.onMouseUp=function(e){var t=e.target.getBoundingClientRect(),n=a.state,r=n.dimensions,p=n.currentParent,l=n.currentParentType,o=n.currentDot,i=n.lastCoords,s=Math.round(a.renderedToRealCoord(e.clientX-t.left,r.renderWidth,r.realWidth)),c=Math.round(a.renderedToRealCoord(e.clientY-t.top,r.renderHeight,r.realHeight)),y=a.calcEstimatedGeoCoord(new B.a.Point({x:s,y:c})),d={x:s,y:c,parent:p,parentType:l,lat:y?y.x:i.lat,lng:y?y.y:i.lng};a.setState({grabbing:!1,showModal:!0,currentDot:Object(P.a)(Object(P.a)({},o),d),currentParent:o.parent?o.parent:p})},a.updateCurrentDot=function(e){var t=a.state.currentDot;void 0!==e.lat&&void 0!==e.lng&&a.setState({lastCoords:{lat:e.lat,lng:e.lng}}),a.setState({currentDot:Object(P.a)(Object(P.a)({},t),e)})},a.setCurrentParent=function(e){var t,n,r=a.state.currentDot,p=[],l=Object(T.a)(e);try{for(l.s();!(n=l.n()).done;)t=n.value,p=[].concat(Object(x.a)(p),[t.value]),a.props.addParent(t.value)}catch(o){l.e(o)}finally{l.f()}r.parent=p,a.setState({currentDot:r,currentParent:p})},a.setCurrentParentType=function(e){var t=a.state.currentDot;t.parentType=e,a.setState({currentDot:t,currentParentType:e}),a.props.addParentType(e)},a.moveDot=function(e){console.log("move dot"),a.setState({grabbing:!0,currentDot:a.props.dots[e]}),a.props.deleteDot(e)},a.resetDots=function(){a.props.resetDots(),a.setState({currentDot:a.state.lastCoords})},a.renderedToRealCoord=function(e,t,n){return e/t*n},a.realToRenderedCoord=function(e,t,n){return e/n*t},a.handleShowModal=function(){a.setState({showModal:!0})},a.handleCloseModal=function(){a.setState({showModal:!1,currentDot:{}})},a.handleSave=function(){a.props.saveDot(a.state.currentDot),a.handleCloseModal()};var r=void 0!==a.props.coords?a.props.coords:{lat:63.42833519737357,lng:13.078345603820786};return a.state={grabbing:!1,dimensions:{},showModal:!1,currentParent:[],currentParentType:"Piste",lastCoords:r,currentDot:{lat:r.lat,lng:r.lng}},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.grabbing,r=t.showModal,p=t.currentDot,l=this.state.dimensions,o=this.props,i=o.dots,s=o.backgroundImageUrl,c=o.dotRadius,y=o.triangles,d=n?"react-image-dot__grabbing":"";return Object(a.jsxs)("div",{id:"react-image-dot",children:[Object(a.jsxs)("div",{className:"react-image-dot__wrapper ".concat(d," no-select"),onMouseUp:this.onMouseUp,width:l.realWidth,height:l.realHeight,children:[Object(a.jsx)(C,{id:"canvas",width:l.realWidth,height:l.realHeight,triangles:y}),Object(a.jsx)("img",{id:"pistemap-img",src:s,alt:"Piste map",width:l.realWidth,onLoad:this.onLoadPisteMap}),i.map((function(t,n){return Object(a.jsx)(D,{dotX:Math.round(e.realToRenderedCoord(t.x,l.renderWidth,l.realWidth)),dotY:Math.round(e.realToRenderedCoord(t.y,l.renderHeight,l.realHeight)),i:n,styles:{boxShadow:"0px 0px 0px 2px purple",backgroundColor:"purple"},moveDot:e.moveDot,dotRadius:c},n)})),0===Object.keys(p).length?null:Object(a.jsx)(D,{dotX:Math.round(this.realToRenderedCoord(p.x,l.renderWidth,l.realWidth)),dotY:Math.round(this.realToRenderedCoord(p.y,l.renderHeight,l.realHeight)),i:0,styles:{boxShadow:"0px 0px 0px 2px green",backgroundColor:"green"},moveDot:function(){return console.log("try to move temp dot")},dotRadius:c},-1)]}),Object(a.jsx)(N,{show:r,dimensions:l,posX:this.realToRenderedCoord(p.x,l.renderWidth,l.realWidth),handleClose:this.handleCloseModal,handleSave:this.handleSave,setCurrentParent:this.setCurrentParent,setCurrentParentType:this.setCurrentParentType,updateCurrentDot:this.updateCurrentDot,currentParent:this.state.currentParent,currentParentType:this.state.currentParentType,currentDot:this.state.currentDot,parents:this.props.parents,parentTypes:this.props.parentTypes,dots:this.props.dots,triangles:y}),this.props.resetDots&&Object(a.jsx)("button",{onClick:this.resetDots,children:"Reset"})]})}}]),n}(p.a.Component);W.defaultProps={pixelCoordinates:!0,backgroundSize:"cover"};var I=n(37);function H(e){var t=e.dots,n=e.deleteDot;return Object(a.jsxs)(I.a,{hover:!0,size:"sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"x"}),Object(a.jsx)("th",{children:"y"}),Object(a.jsx)("th",{children:"long"}),Object(a.jsx)("th",{children:"lat"}),Object(a.jsx)("th",{children:"parent"}),Object(a.jsx)("th",{children:"parentType"}),Object(a.jsx)("th",{children:"note"}),Object(a.jsx)("th",{children:"delete"})]})}),Object(a.jsx)("tbody",{children:t.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[t," "]}),Object(a.jsx)("td",{children:e.x}),Object(a.jsx)("td",{children:e.y}),Object(a.jsx)("td",{children:e.lng}),Object(a.jsx)("td",{children:e.lat}),Object(a.jsx)("td",{children:JSON.stringify(e.parent)}),Object(a.jsx)("td",{children:e.parentType}),Object(a.jsx)("td",{children:e.note}),Object(a.jsx)("td",{children:Object(a.jsx)(f.a,{variant:"danger",onClick:function(){return n(t)},children:"\xd7"})})]},t)}))})]})}var G=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).findEnclosingTriangle=function(e,t){var n,a,r=1/0,p=Object(T.a)(t);try{for(p.s();!(a=p.n()).done;){var l=a.value;if(l.enclosesGeoCoords(e))return l;var o=l.geoDistanceToPoint(e);o<r&&(r=o,n=l)}}catch(i){p.e(i)}finally{p.f()}return n},a.generateTestReport=function(){var e,t=a.state.dots.length,n=[],r=a.state.dots.slice();for(e=t;e>=3;e--){var p,l=1/0,o=[],i=0,s=0;for(p=0;p<e;p++){var c=r.slice();c.splice(p,1);var y=B.a.triangulate(c),d=a.calculateError(y);if(null!=d){var h=d.error,g=d.numClassified,u=Math.sqrt(h*h/g);u<l&&(s=p,l=u,i=g,o=y)}}n.push({n:e,numClassified:i,minRMSE:l,minTriangles:o}),r.splice(s,1)}return n},a.calculateError=function(e){var t=a.state.referencePoints;if(e.length<1)return null;var n,r=0,p=0,l=Object(T.a)(t);try{for(l.s();!(n=l.n()).done;){var o=n.value,i=a.findEnclosingTriangle(o,e);if(i){var s=i.transformGeoCoords(o);p+=o.distance(new B.a.Point(s)),r++}}}catch(c){l.e(c)}finally{l.f()}return{error:p,numClassified:r}},a.addDot=function(e){var t=a.state.dots;a.setState({dots:[].concat(Object(x.a)(t),[new B.a.Point(e)])},(function(){this.setState({triangles:B.a.triangulate(this.state.dots)})}))},a.saveDot=function(e){var t=a.state.dots;a.deleteDot(t.length-1),a.addDot(e)},a.deleteDot=function(e){a.setState({dots:a.state.dots.filter((function(t,n){return n!==e}))},(function(){this.setState({triangles:B.a.triangulate(this.state.dots)})}))},a.resetDots=function(){a.setState({dots:a.initialDots},(function(){this.setState({triangles:[]})}))},a.addParent=function(e){a.state.parents.includes(e)||a.setState({parents:[].concat(Object(x.a)(a.state.parents),[e])})},a.addParentType=function(e){a.state.parentTypes.includes(e)||a.setState({parentTypes:[].concat(Object(x.a)(a.state.parentTypes),[e])})},a.handleResize=function(){a.setState({windowWidth:.98*window.innerWidth})},a.loadPointData=function(e){e=e.map((function(e){return new B.a.Point(e)})),a.initialDots=e;var t,n,r=[],p=[],l=Object(T.a)(e);try{for(l.s();!(n=l.n()).done;){var o;t=n.value;var i,s=Object(T.a)(t.parent);try{for(s.s();!(i=s.n()).done;)o=i.value,p.includes(o)||(p=[].concat(Object(x.a)(p),[o]))}catch(c){s.e(c)}finally{s.f()}t.x=parseInt(t.x),t.y=parseInt(t.y),r=[].concat(Object(x.a)(r),[t])}}catch(c){l.e(c)}finally{l.f()}a.setState({dots:r,parents:p},(function(){this.setState({triangles:B.a.triangulate(this.state.dots)})}))},a.includesPoint=function(e,t){var n,a=Object(T.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.x===t.x&&r.y===t.y)return!0}}catch(p){a.e(p)}finally{a.f()}return!1},a.loadTriangleData=function(e){var t,n=[],r=[],p=Object(T.a)(e);try{for(p.s();!(t=p.n()).done;){var l,o=t.value,i=Object(T.a)(o);try{for(i.s();!(l=i.n()).done;){var s=l.value,c=new B.a.Point(s);if(!a.includesPoint(n,c)){n=[].concat(Object(x.a)(n),[c]);var y,d=Object(T.a)(c.parent);try{for(d.s();!(y=d.n()).done;){var h=y.value;r.includes(h)||(r=[].concat(Object(x.a)(r),[h]))}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){i.e(g)}finally{i.f()}}}catch(g){p.e(g)}finally{p.f()}a.initialDots=n,a.setState({dots:n,parents:r},(function(){this.setState({triangles:B.a.triangulate(this.state.dots)},(function(){this.setState({currentError:this.calculateError(this.state.triangles)})}))}))},a.initialDots=[],a.state={title:a.props.resort.title,src:a.props.resort.src,x:0,y:0,referencePoints:j.map((function(e){return new B.a.Point(e)})),dots:a.initialDots,triangles:[],parents:[],parentTypes:["Piste","Lift","Terrain","Restaurant","Other"],windowWidth:.98*window.innerWidth},a}return Object(s.a)(n,[{key:"renderedToRealCoord",value:function(e,t,n){return e/t*n}},{key:"realToRenderedCoord",value:function(e,t,n){return e/n*t}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.state,t=e.dots,n=e.parents,r=e.parentTypes,p=e.src,l=e.currentError;return Object(a.jsxs)("div",{id:"matcher",children:[Object(a.jsx)(W,{backgroundImageUrl:p,onLoadMap:this.onLoadPisteMap,dots:t,triangles:this.state.triangles,parents:n,parentTypes:r,deleteDot:this.deleteDot,saveDot:this.saveDot,addDot:this.addDot,addParent:this.addParent,addParentType:this.addParentType,dotRadius:1}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"bottom-toolbox",children:[Object(a.jsx)(O,{imgSrc:this.state.src,points:this.state.dots,triangles:this.state.triangles,loadPointData:this.loadPointData,loadTriangleData:this.loadTriangleData,currentError:l,generateTestReport:this.generateTestReport}),Object(a.jsx)(H,{dots:this.state.dots,deleteDot:this.deleteDot}),Object(a.jsx)(f.a,{variant:"success",onClick:this.resetDots,children:"Reset"})]})]})}}]),n}(p.a.Component),E=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).changeFileType=function(e){var t=e.target.value;a.setState({fileType:t})},a.download=function(e){var t;e.preventDefault();var n=a.props.points;if("json"===a.state.fileType){var r=n.map((function(e){return{id:e.id,name:e.name,shortName:e.shortName,areaId:e.areaId,pisteMapCoordinates:{x:e.x,y:e.y}}}));t=JSON.stringify({points:r},null,4)}else if("csv"===a.state.fileType){var p=[];p.push(["id","name","shortName","areaId","x","y"]),n.map((function(e){return p.push([e.id,e.name,e.shortName,e.areaId,e.x,e.y])})),t=a.makeCSV(p)}var l=new Blob([t]),o=URL.createObjectURL(l);a.setState({fileDownloadUrl:o},(function(){a.dofileDownload.click(),URL.revokeObjectURL(o),a.setState({fileDownloadUrl:""})}))},a.upload=function(e){e.preventDefault(),a.dofileUpload.click()},a.makeCSV=function(e){var t="";return e.forEach((function(e){e.forEach((function(e,n){var a=(void 0===e?"":e.toString()).replace(/"/g,'""');a.search(/("|,|\n)/g)>=0&&(a='"'+a+'"'),n>0&&(t+=","),t+=a})),t+="\n"})),t},a.openFile=function(e){var t=e.target.files[0],n=new FileReader;if(t instanceof Blob){var r=function(e){var t=e.target.result;try{var n=JSON.parse(t);n.hasOwnProperty("lifts")?a.props.loadPointData(n.lifts):n.hasOwnProperty("slopes")?a.props.loadPointData(n.slopes):n.hasOwnProperty("restaurants")?a.props.loadPointData(n.restaurants):alert("Unable to load JSON data, missing key value lifts, slopes or restaurants")}catch(e){alert(e)}};r=r.bind(Object(b.a)(a)),n.onload=r,n.readAsText(t)}},a.downloadTestReport=function(e){console.log("generating test report"),e.preventDefault();var t=a.props.generateTestReport(),n=JSON.stringify({testReport:t},null,4),r=new Blob([n]),p=URL.createObjectURL(r);a.setState({fileDownloadUrl:URL.createObjectURL(r)},(function(){a.doTestReportDownload.click(),URL.revokeObjectURL(p),a.setState({fileDownloadUrl:""})}))};var r=a.props.imgSrc,p=r.substr(r.lastIndexOf("/")+1,r.length);return p=p.substr(0,p.lastIndexOf(".")),a.fileNames={json:String(p)+".json",csv:String(p)+".csv"},a.state={fileType:"json",fileDownloadUrl:null,resort:p},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{id:"fileForm",children:Object(a.jsx)(d.a,{children:Object(a.jsxs)(m.a,{className:"justify-content-md-center",children:[Object(a.jsx)(v.a,{md:"auto",children:Object(a.jsxs)(h.a.Control,{as:"select",name:"fileType",className:"fileForm-child",onChange:this.changeFileType,value:this.state.fileType,children:[Object(a.jsx)("option",{value:"csv",children:"CSV"}),Object(a.jsx)("option",{value:"json",children:"JSON"})]})}),Object(a.jsxs)(v.a,{md:"auto",children:[Object(a.jsx)(f.a,{onClick:this.download,className:"fileForm-child",children:"Download"}),Object(a.jsx)("a",{className:"hidden",download:this.fileNames[this.state.fileType],href:this.state.fileDownloadUrl,ref:function(t){return e.dofileDownload=t},children:"download it"})]}),Object(a.jsxs)(v.a,{md:"auto",children:[Object(a.jsx)(f.a,{onClick:this.upload,className:"fileForm-child",children:"Upload"}),Object(a.jsx)("input",{type:"file",className:"hidden",multiple:!1,accept:".json,application/json",onChange:function(t){return e.openFile(t)},ref:function(t){return e.dofileUpload=t}})]})]})})})}}]),n}(p.a.Component),A=n(35),F=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).clearFields=function(){a.setState({id:"",name:"",shortName:"",areaId:""})},a.onKeyPress=function(e){"Enter"===e.key&&a.props.handleSave()},a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(A.a)({},r,n))},a.state={id:a.props.currentDot.id,name:a.props.currentDot.name,shortName:a.props.currentDot.shortName,areaId:a.props.currentDot.areaId},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.handleClose,n=window.innerWidth,r=this.props.posX>n/2?0:Math.round(.525*n);return Object(a.jsx)("div",{id:"geoCoordSelector",children:Object(a.jsxs)("div",{className:"coord-selector",children:[Object(a.jsx)(w,{show:!0,clicked:t}),Object(a.jsxs)(L.a,{className:"modal-body",style:{top:10,left:r},children:[Object(a.jsxs)(L.a.Body,{children:[Object(a.jsx)(L.a.Title,{children:"Edit point data"}),Object(a.jsxs)(h.a,{children:[Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,children:"x"}),Object(a.jsx)(v.a,{sm:4,children:Object(a.jsx)(h.a.Control,{type:"number",defaultValue:this.props.currentDot.x,onChange:function(t){e.props.updateCurrentDot({x:t.target.value})}})}),Object(a.jsx)(h.a.Label,{column:!0,children:"y"}),Object(a.jsx)(v.a,{sm:4,children:Object(a.jsx)(h.a.Control,{type:"number",defaultValue:this.props.currentDot.y,onChange:function(t){e.props.updateCurrentDot({y:t.target.value})}})})]}),Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,children:"id"}),Object(a.jsx)(v.a,{sm:8,children:Object(a.jsx)(h.a.Control,{type:"text",placeholder:"Enter id...",name:"id",defaultValue:this.state.id,onChange:this.handleInputChange})})]}),Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,children:"name"}),Object(a.jsx)(v.a,{sm:8,children:Object(a.jsx)(h.a.Control,{type:"text",placeholder:"Enter name...",name:"name",defaultValue:this.state.name,onChange:this.handleInputChange})})]}),Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,children:"shortName"}),Object(a.jsx)(v.a,{sm:8,children:Object(a.jsx)(h.a.Control,{type:"text",placeholder:"Enter shortName...",name:"shortName",defaultValue:this.state.shortName,onChange:this.handleInputChange})})]}),Object(a.jsxs)(h.a.Group,{as:m.a,children:[Object(a.jsx)(h.a.Label,{column:!0,children:"areaId"}),Object(a.jsx)(v.a,{sm:8,children:Object(a.jsx)(h.a.Control,{type:"text",placeholder:"Enter areaId...",name:"areaId",defaultValue:this.state.areaId,onChange:this.handleInputChange,onKeyPress:this.onKeyPress})})]})]})]}),Object(a.jsxs)(L.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:t,children:"Delete"}),Object(a.jsx)(f.a,{variant:"secondary",onClick:t,children:"Close"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){return e.props.handleSave(e.state)},children:"Save"})]})]})]})})}}]),n}(p.a.Component),V=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onLoadPisteMap=function(e){var t=e.target;a.setState({dimensions:{renderWidth:t.offsetWidth,renderHeight:t.offsetHeight,realWidth:t.naturalWidth,realHeight:t.naturalHeight}})},a.onMouseUp=function(e){var t=e.target.getBoundingClientRect(),n=a.state,r=n.dimensions,p=n.currentDot,l=Math.round(a.renderedToRealCoord(e.clientX-t.left,r.renderWidth,r.realWidth)),o=Math.round(a.renderedToRealCoord(e.clientY-t.top,r.renderHeight,r.realHeight));if(0===Object.keys(p).length){var i={x:l,y:o};a.setState({grabbing:!1,showModal:!0,currentDot:i})}},a.updateCurrentDot=function(e){var t=a.state.currentDot;a.setState({currentDot:Object(P.a)(Object(P.a)({},t),e)})},a.moveDot=function(e){var t=a.props.dots[e];a.setState({grabbing:!0,currentDot:t,showModal:!0}),a.props.deleteDot(e)},a.resetDots=function(){a.props.resetDots()},a.renderedToRealCoord=function(e,t,n){return e/t*n},a.realToRenderedCoord=function(e,t,n){return e/n*t},a.handleShowModal=function(){a.setState({showModal:!0})},a.handleCloseModal=function(){a.setState({grabbing:!1,showModal:!1,currentDot:{}})},a.handleSave=function(e){console.log(JSON.stringify(e));var t=a.state.currentDot;a.setState({currentDot:Object(P.a)(Object(P.a)({},t),e)},(function(){this.props.saveDot(this.state.currentDot),this.handleCloseModal()}))},a.state={grabbing:!1,dimensions:{},currentDot:{}},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.grabbing,r=t.currentDot,p=this.state.dimensions,l=this.props,o=l.dots,i=l.backgroundImageUrl,s=l.dotRadius,c=n?"react-image-dot__grabbing":"";return Object(a.jsxs)("div",{id:"react-image-dot",children:[Object(a.jsxs)("div",{className:"react-image-dot__wrapper ".concat(c," no-select"),onMouseUp:this.onMouseUp,width:p.realWidth,height:p.realHeight,children:[Object(a.jsx)("img",{id:"pistemap-img",src:i,alt:"Piste map",width:p.realWidth,onLoad:this.onLoadPisteMap}),o.map((function(t,n){return Object(a.jsx)(D,{dotX:Math.round(e.realToRenderedCoord(t.x,p.renderWidth,p.realWidth)),dotY:Math.round(e.realToRenderedCoord(t.y,p.renderHeight,p.realHeight)),i:n,styles:{boxShadow:"0px 0px 0px 2px purple",backgroundColor:"purple"},moveDot:e.moveDot,dotRadius:s},n)})),0===Object.keys(r).length?null:Object(a.jsx)(D,{dotX:Math.round(this.realToRenderedCoord(r.x,p.renderWidth,p.realWidth)),dotY:Math.round(this.realToRenderedCoord(r.y,p.renderHeight,p.realHeight)),i:0,styles:{boxShadow:"0px 0px 0px 2px green",backgroundColor:"green"},moveDot:function(){return console.log("try to move temp dot")},dotRadius:s},-1)]}),"number of points: ",this.props.dots.length,this.state.showModal?Object(a.jsx)(F,{dimensions:p,posX:this.realToRenderedCoord(r.x,p.renderWidth,p.realWidth),handleClose:this.handleCloseModal,handleSave:this.handleSave,updateCurrentDot:this.updateCurrentDot,currentDot:this.state.currentDot}):null,this.props.resetDots&&Object(a.jsx)("button",{onClick:this.resetDots,children:"Reset"})]})}}]),n}(p.a.Component);function z(e){var t=e.dots,n=e.deleteDot;return Object(a.jsxs)(I.a,{hover:!0,size:"sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"id"}),Object(a.jsx)("th",{children:"name"}),Object(a.jsx)("th",{children:"shortName"}),Object(a.jsx)("th",{children:"areaId"}),Object(a.jsx)("th",{children:"x"}),Object(a.jsx)("th",{children:"y"}),Object(a.jsx)("th",{children:"delete"})]})}),Object(a.jsx)("tbody",{children:t.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[t," "]}),Object(a.jsx)("td",{children:e.id}),Object(a.jsx)("td",{children:e.name}),Object(a.jsx)("td",{children:e.shortName}),Object(a.jsx)("td",{children:e.areaId}),Object(a.jsx)("td",{children:e.x}),Object(a.jsx)("td",{children:e.y}),Object(a.jsx)("td",{children:Object(a.jsx)(f.a,{variant:"danger",onClick:function(){return n(t)},children:"\xd7"})})]},t)}))})]})}V.defaultProps={pixelCoordinates:!0,backgroundSize:"cover"};var q=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).addDot=function(e){var t=a.state.dots;a.setState({dots:[].concat(Object(x.a)(t),[e])})},a.saveDot=function(e){var t=a.state.dots;a.deleteDot(t.length-1),a.addDot(e)},a.deleteDot=function(e){a.setState({dots:a.state.dots.filter((function(t,n){return n!==e}))})},a.resetDots=function(){a.setState({dots:a.initialDots})},a.handleResize=function(){a.setState({windowWidth:.98*window.innerWidth})},a.loadPointData=function(e){var t=e.map((function(e){return{id:e.id,name:e.name,shortName:e.shortName,areaId:e.areaId,x:e.pisteMapCoordinates?e.pisteMapCoordinates.x:0,y:e.pisteMapCoordinates?e.pisteMapCoordinates.y:0}}));a.initialDots=t,a.setState({dots:t})},a.initialDots=[],a.state={title:a.props.resort.title,src:a.props.resort.src,dots:a.initialDots,windowWidth:.98*window.innerWidth},a}return Object(s.a)(n,[{key:"renderedToRealCoord",value:function(e,t,n){return e/t*n}},{key:"realToRenderedCoord",value:function(e,t,n){return e/n*t}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.state,t=e.dots,n=e.src;return Object(a.jsxs)("div",{id:"matcher",children:[Object(a.jsx)(V,{backgroundImageUrl:n,onLoadMap:this.onLoadPisteMap,parents:[],dots:t,deleteDot:this.deleteDot,saveDot:this.saveDot,addDot:this.addDot,dotRadius:1}),Object(a.jsxs)("div",{className:"bottom-toolbox",children:[Object(a.jsx)(E,{imgSrc:this.state.src,points:this.state.dots,loadPointData:this.loadPointData}),Object(a.jsx)(z,{dots:this.state.dots,deleteDot:this.deleteDot}),Object(a.jsx)(f.a,{variant:"success",onClick:this.resetDots,children:"Reset"})]})]})}}]),n}(p.a.Component),J=[{id:0,src:"./assets/are.png",title:"\xc5re"},{id:1,src:"./assets/bjornen.png",title:"\xc5re Bj\xf6rnen"},{id:2,src:"./assets/duved.png",title:"Duved"},{id:3,src:"./assets/bjornrike.png",title:"Bj\xf6rnrike"},{id:4,src:"./assets/vemdalsskalet.png",title:"Vemdalsskalet"},{id:5,src:"./assets/hemsedal.png",title:"Hemsedal"},{id:6,src:"./assets/salen-lindvallen.png",title:"Lindvallen"},{id:7,src:"./assets/salen-hogfjallet.png",title:"H\xf6gfj\xe4llet"},{id:8,src:"./assets/salen-hundfjallet.png",title:"Hundfj\xe4llet"}];var X=function(e){return Object(a.jsx)("div",{id:"docs",children:Object(a.jsx)("h1",{children:"Docs"})})};var K=function(e){return Object(a.jsx)("div",{id:"about",children:Object(a.jsxs)("div",{className:"page-content",children:[Object(a.jsx)("h1",{children:"About"}),Object(a.jsx)("p",{children:"This georeferencing tool comes with two different collection modes. The standard mode matches geographic coordinates (lat, lng) with map coordinates (x, y). When enough points have been collected, it will make suggestions on where to place the geographic marker for each piste map coordinate. The exported file structure is in triangle format. The other mode collects only piste map coordinates (x, y). For each collected coordinate, you may also specify id, name, shortName, and area id."})]})})},_=n(88),Y=n(90),Z=n(10),Q=function(e){Object(c.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setResort=function(e,t){a.setState({resortObject:J[e],useGeoCoords:t})},a.uploadMap=function(e,t){a.setState({resortObject:{src:e,title:"MyMap"},useGeoCoords:t})},a.state={resortObject:null,useGeoCoords:!0},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(g.a,{basename:"/georeferencing-tool",children:[Object(a.jsxs)(_.a,{className:"navbar",bg:"light",variant:"light",children:[Object(a.jsx)(_.a.Brand,{href:"/",children:Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("h1",{children:"Georeferencing Tool"})})}),Object(a.jsxs)(Y.a,{className:"mr-auto",children:[Object(a.jsx)(Y.a.Link,{href:"/docs",children:"Docs"}),Object(a.jsx)(Y.a.Link,{href:"/about",children:"About"})]})]}),Object(a.jsxs)(Z.d,{children:[Object(a.jsx)(Z.b,{exact:!0,path:"/georeferencing-tool/",children:Object(a.jsx)(u,{resorts:J,onSelect:this.setResort,onUpload:this.uploadMap})}),Object(a.jsx)(Z.b,{exact:!0,path:"/georeferencing-tool/docs",children:Object(a.jsx)(X,{})}),Object(a.jsx)(Z.b,{path:"/about",children:Object(a.jsx)(K,{})}),Object(a.jsx)(Z.b,{path:"/matcher",children:e.state.resortObject?e.state.useGeoCoords?Object(a.jsx)(G,{resort:e.state.resortObject}):Object(a.jsx)(q,{resort:e.state.resortObject}):Object(a.jsx)(Z.a,{to:{pathname:"/",state:{from:e.props.location}}})})]})]})})}}]),n}(p.a.Component),$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,p=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),p(e),l(e)}))};o.a.render(Object(a.jsx)(Q,{}),document.getElementById("root")),$()}},[[84,1,2]]]);
//# sourceMappingURL=main.db301c2a.chunk.js.map